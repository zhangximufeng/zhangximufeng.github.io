<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis简介 | Myfun&#39;s Blog</title>
    <meta name="description" content="redis">
    <link rel="icon" href="/favicon.ico">
    <meta name="keywords" content="redis">
    <link rel="preload" href="/assets/css/0.styles.6bc9bf16.css" as="style"><link rel="preload" href="/assets/js/app.35b69267.js" as="script"><link rel="preload" href="/assets/js/78.0a67366d.js" as="script"><link rel="prefetch" href="/assets/js/10.a2f6c6ac.js"><link rel="prefetch" href="/assets/js/100.24b9a366.js"><link rel="prefetch" href="/assets/js/101.085f0585.js"><link rel="prefetch" href="/assets/js/102.66d5674f.js"><link rel="prefetch" href="/assets/js/103.7f71429c.js"><link rel="prefetch" href="/assets/js/104.13b0f535.js"><link rel="prefetch" href="/assets/js/105.0a093e85.js"><link rel="prefetch" href="/assets/js/106.a4a1db62.js"><link rel="prefetch" href="/assets/js/107.2634aacf.js"><link rel="prefetch" href="/assets/js/108.b393516d.js"><link rel="prefetch" href="/assets/js/109.769b78fb.js"><link rel="prefetch" href="/assets/js/11.fb483cc4.js"><link rel="prefetch" href="/assets/js/12.24a41994.js"><link rel="prefetch" href="/assets/js/13.a4762474.js"><link rel="prefetch" href="/assets/js/14.4a737bc9.js"><link rel="prefetch" href="/assets/js/15.548f4e99.js"><link rel="prefetch" href="/assets/js/16.b0d2654c.js"><link rel="prefetch" href="/assets/js/17.d43ab467.js"><link rel="prefetch" href="/assets/js/18.0c8f5f87.js"><link rel="prefetch" href="/assets/js/19.19ef59f8.js"><link rel="prefetch" href="/assets/js/2.436a35aa.js"><link rel="prefetch" href="/assets/js/20.24296203.js"><link rel="prefetch" href="/assets/js/21.c486888f.js"><link rel="prefetch" href="/assets/js/22.7e2305f9.js"><link rel="prefetch" href="/assets/js/23.e55bab1b.js"><link rel="prefetch" href="/assets/js/24.1468433c.js"><link rel="prefetch" href="/assets/js/25.6d82837f.js"><link rel="prefetch" href="/assets/js/26.3c4b2f18.js"><link rel="prefetch" href="/assets/js/27.21725a4f.js"><link rel="prefetch" href="/assets/js/28.db16c479.js"><link rel="prefetch" href="/assets/js/29.cb9512e5.js"><link rel="prefetch" href="/assets/js/3.5c82c0f7.js"><link rel="prefetch" href="/assets/js/30.a4c25096.js"><link rel="prefetch" href="/assets/js/31.81741530.js"><link rel="prefetch" href="/assets/js/32.da6d2ac6.js"><link rel="prefetch" href="/assets/js/33.f6164ecd.js"><link rel="prefetch" href="/assets/js/34.0344ad22.js"><link rel="prefetch" href="/assets/js/35.07d4c8d3.js"><link rel="prefetch" href="/assets/js/36.2c6adcff.js"><link rel="prefetch" href="/assets/js/37.ceb5e95e.js"><link rel="prefetch" href="/assets/js/38.d39e96e5.js"><link rel="prefetch" href="/assets/js/39.fcf34164.js"><link rel="prefetch" href="/assets/js/4.267db630.js"><link rel="prefetch" href="/assets/js/40.bdf31768.js"><link rel="prefetch" href="/assets/js/41.cc61eccd.js"><link rel="prefetch" href="/assets/js/42.042e4349.js"><link rel="prefetch" href="/assets/js/43.b385d348.js"><link rel="prefetch" href="/assets/js/44.7669f3e2.js"><link rel="prefetch" href="/assets/js/45.2fb532f4.js"><link rel="prefetch" href="/assets/js/46.0cc86442.js"><link rel="prefetch" href="/assets/js/47.30448b83.js"><link rel="prefetch" href="/assets/js/48.8893a5ed.js"><link rel="prefetch" href="/assets/js/49.ed7be1ae.js"><link rel="prefetch" href="/assets/js/5.d8a5933e.js"><link rel="prefetch" href="/assets/js/50.e4af394b.js"><link rel="prefetch" href="/assets/js/51.502ca2a7.js"><link rel="prefetch" href="/assets/js/52.f9768ea6.js"><link rel="prefetch" href="/assets/js/53.0c762369.js"><link rel="prefetch" href="/assets/js/54.dad23d00.js"><link rel="prefetch" href="/assets/js/55.4298d6a4.js"><link rel="prefetch" href="/assets/js/56.d8505fa7.js"><link rel="prefetch" href="/assets/js/57.63d197ce.js"><link rel="prefetch" href="/assets/js/58.ae9a3671.js"><link rel="prefetch" href="/assets/js/59.cb04d7cd.js"><link rel="prefetch" href="/assets/js/6.a83fef9a.js"><link rel="prefetch" href="/assets/js/60.0cedb385.js"><link rel="prefetch" href="/assets/js/61.a5c3f820.js"><link rel="prefetch" href="/assets/js/62.fc2d969d.js"><link rel="prefetch" href="/assets/js/63.53f087e3.js"><link rel="prefetch" href="/assets/js/64.9384bc9a.js"><link rel="prefetch" href="/assets/js/65.bb5db767.js"><link rel="prefetch" href="/assets/js/66.86940f42.js"><link rel="prefetch" href="/assets/js/67.37215862.js"><link rel="prefetch" href="/assets/js/68.e0c14875.js"><link rel="prefetch" href="/assets/js/69.276f0d65.js"><link rel="prefetch" href="/assets/js/7.7e7cde5e.js"><link rel="prefetch" href="/assets/js/70.0fb38ae4.js"><link rel="prefetch" href="/assets/js/71.7c824b27.js"><link rel="prefetch" href="/assets/js/72.bc39810c.js"><link rel="prefetch" href="/assets/js/73.9917d9a4.js"><link rel="prefetch" href="/assets/js/74.7912f7da.js"><link rel="prefetch" href="/assets/js/75.c193b7ec.js"><link rel="prefetch" href="/assets/js/76.ecd4e536.js"><link rel="prefetch" href="/assets/js/77.842c5aba.js"><link rel="prefetch" href="/assets/js/79.324df7d4.js"><link rel="prefetch" href="/assets/js/8.7063c274.js"><link rel="prefetch" href="/assets/js/80.68c6326b.js"><link rel="prefetch" href="/assets/js/81.a7df7b21.js"><link rel="prefetch" href="/assets/js/82.abd9c0c2.js"><link rel="prefetch" href="/assets/js/83.fd0d8457.js"><link rel="prefetch" href="/assets/js/84.148b432c.js"><link rel="prefetch" href="/assets/js/85.32148693.js"><link rel="prefetch" href="/assets/js/86.7dc5fe11.js"><link rel="prefetch" href="/assets/js/87.bd1be392.js"><link rel="prefetch" href="/assets/js/88.2c0b86aa.js"><link rel="prefetch" href="/assets/js/89.3038cc8d.js"><link rel="prefetch" href="/assets/js/9.5cab2997.js"><link rel="prefetch" href="/assets/js/90.fb4057a1.js"><link rel="prefetch" href="/assets/js/91.4aa5adaf.js"><link rel="prefetch" href="/assets/js/92.aea0a62e.js"><link rel="prefetch" href="/assets/js/93.e2d0e9a7.js"><link rel="prefetch" href="/assets/js/94.a9e33a20.js"><link rel="prefetch" href="/assets/js/95.7c55098e.js"><link rel="prefetch" href="/assets/js/96.c8dfe1c0.js"><link rel="prefetch" href="/assets/js/97.35fc7df3.js"><link rel="prefetch" href="/assets/js/98.551b3ede.js"><link rel="prefetch" href="/assets/js/99.a8f5ffc4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6bc9bf16.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="wrap"><div class="theme-container container no-sidebar"><header class="navbar"><div class="nav-header"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" class="logo"> <span class="site-name can-hide">
        Myfun's Blog
      </span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/interview/" class="nav-link">InterviewMap</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/css_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">CSS_Tricks</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/js_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">JS_Tricks</a></div><div class="nav-item"><a href="/tags/" class="nav-link">Tags</a></div><div class="nav-item"><a href="https://github.com/zhangximufeng" target="_blank" rel="noopener noreferrer" class="nav-link">Github</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/animate_resume_ts/" target="_blank" rel="noopener noreferrer" class="nav-link">About</a></div> <!----></nav> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/interview/" class="nav-link">InterviewMap</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/css_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">CSS_Tricks</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/js_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">JS_Tricks</a></div><div class="nav-item"><a href="/tags/" class="nav-link">Tags</a></div><div class="nav-item"><a href="https://github.com/zhangximufeng" target="_blank" rel="noopener noreferrer" class="nav-link">Github</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/animate_resume_ts/" target="_blank" rel="noopener noreferrer" class="nav-link">About</a></div> <!----></nav> <!----></div> <div class="page-container"><div><div class="page card"><div class="content-header"><!----> <span class="page-timestamp">2018-09-29</span></div> <div class="content"><p></p><div class="table-of-contents"><ul><li><a href="#redis简介">Redis简介</a><ul><li><a href="#_2-redis-优势-t12-redis-优势">2.Redis 优势 #</a></li><li><a href="#_3-安装-t23-安装">3\. 安装 #</a></li><li><a href="#_4-数据类型-t64-数据类型">4\. 数据类型 #</a></li><li><a href="#_5-node-js中的使用-t365-node-js中的使用">5\. Node.js中的使用 #</a></li><li><a href="#_6-redis发布订阅-t376-redis发布订阅">6\. Redis发布订阅 #</a></li><li><a href="#_7-redis事务-t387-redis事务">7\. Redis事务 #</a></li><li><a href="#_8-备份与恢复-t398-备份与恢复">8\. 备份与恢复 #</a></li><li><a href="#_8-安全-t428-安全">8\. 安全 #</a></li></ul></li></ul></div><p></p> <h1 id="redis简介"><a href="#redis简介" aria-hidden="true" class="header-anchor">#</a> Redis简介</h1> <hr> <p>Redis 是完全开源免费的，遵守BSD协议，是一个高性能的key-value数据库。</p> <h2 id="_2-redis-优势-t12-redis-优势"><a href="#_2-redis-优势-t12-redis-优势" aria-hidden="true" class="header-anchor">#</a> 2.Redis 优势 [#](#t12.Redis 优势)</h2> <ul><li><p>性能极高 – Redis能读的速度是110000次/s,写的速度是81000次/s 。</p></li> <li><p>丰富的数据类型 – Redis支持二进制的字符串、列表、哈希值、集合和有序集合等数据类型操作。</p></li> <li><p>原子性 – Redis的所有操作都是原子性的，意思就是要么成功执行要么失败完全不执行</p></li> <li><p>单个操作是原子性的。多个操作也支持事务，即原子性，通过MULTI和EXEC指令包起来。</p></li> <li><p>丰富的特性 – Redis还支持 发布/订阅, 通知, key 过期等等特性。</p></li> <li><h2 id="_3-安装-t23-安装"><a href="#_3-安装-t23-安装" aria-hidden="true" class="header-anchor">#</a> 3. 安装 [#](#t23. 安装)</h2> <h3 id="_3-1-window下安装-t33-1-window下安装"><a href="#_3-1-window下安装-t33-1-window下安装" aria-hidden="true" class="header-anchor">#</a> 3.1 Window下安装 [#](#t33.1 Window下安装)</h3></li> <li><p><a href="https://github.com/ServiceStack/redis-windows" target="_blank" rel="noopener noreferrer">redis-windows<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://github.com/ServiceStack/redis-windows/raw/master/downloads/redis-latest.zip" target="_blank" rel="noopener noreferrer">redis服务端下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://redisdesktop.com/download" target="_blank" rel="noopener noreferrer">redis客户端下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://redis.io/" target="_blank" rel="noopener noreferrer">redis官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="http://www.redis.cn/documentation.html" target="_blank" rel="noopener noreferrer">redis中文网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-bash extra-class"><pre class="language-bash"><code>redis-server.exe redis.windows.conf
redis-cli.exe -h 127.0.0.1 -p 6379
</code></pre></div></li></ul> <h3 id="_3-2-mac下安装-t43-2-mac下安装"><a href="#_3-2-mac下安装-t43-2-mac下安装" aria-hidden="true" class="header-anchor">#</a> 3.2 Mac下安装 [#](#t43.2 Mac下安装)</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>brew <span class="token function">install</span> redis
brew services start redis
redis-server /usr/local/etc/redis.conf
</code></pre></div><h3 id="_3-3-配置-t53-3-配置"><a href="#_3-3-配置-t53-3-配置" aria-hidden="true" class="header-anchor">#</a> 3.3 配置 [#](#t53.3 配置)</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>CONFIG GET CONFIG_SETTING_NAME
CONFIG GET port
</code></pre></div><h2 id="_4-数据类型-t64-数据类型"><a href="#_4-数据类型-t64-数据类型" aria-hidden="true" class="header-anchor">#</a> 4. 数据类型 [#](#t64. 数据类型)</h2> <ul><li>字符串</li> <li>哈希值</li> <li>链表</li> <li>集合</li> <li>有序列表</li></ul> <h3 id="_4-1-字符串-t74-1-字符串"><a href="#_4-1-字符串-t74-1-字符串" aria-hidden="true" class="header-anchor">#</a> 4.1 字符串 [#](#t74.1  字符串)</h3> <p>字符串是最基本的类型,一个key对应一个value</p> <h4 id="_4-1-1-set-设置值-t84-1-1-set-设置值"><a href="#_4-1-1-set-设置值-t84-1-1-set-设置值" aria-hidden="true" class="header-anchor">#</a> 4.1.1 SET 设置值 [#](#t84.1.1 SET 设置值)</h4> <pre><code>SET name zxmf
</code></pre> <h4 id="_4-1-2-get-获取值-t94-1-2-get-获取值"><a href="#_4-1-2-get-获取值-t94-1-2-get-获取值" aria-hidden="true" class="header-anchor">#</a> 4.1.2 GET 获取值 [#](#t94.1.2 GET 获取值)</h4> <pre><code>GET name
</code></pre> <h4 id="_4-1-3-getrange-获取子串-t104-1-3-getrange-获取子串"><a href="#_4-1-3-getrange-获取子串-t104-1-3-getrange-获取子串" aria-hidden="true" class="header-anchor">#</a> 4.1.3 GETRANGE 获取子串 [#](#t104.1.3 GETRANGE 获取子串)</h4> <pre><code>GETRANGE key start end
getrange name 1 2
&quot;fp&quot;
</code></pre> <h4 id="_4-1-4-incr-incrby-递增-t114-1-4-incr-incrby-递增"><a href="#_4-1-4-incr-incrby-递增-t114-1-4-incr-incrby-递增" aria-hidden="true" class="header-anchor">#</a> 4.1.4 INCR INCRBY 递增 [#](#t114.1.4 INCR INCRBY 递增)</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> age <span class="token number">1</span>
INCR age
INCRBY age <span class="token number">6</span>
DECR age
DECRBY age  <span class="token number">9</span>
</code></pre></div><h4 id="_4-1-5-键-t124-1-5-键"><a href="#_4-1-5-键-t124-1-5-键" aria-hidden="true" class="header-anchor">#</a> 4.1.5 键 [#](#t124.1.5  键)</h4> <div class="language-sql extra-class"><pre class="language-sql"><code>DEL <span class="token keyword">key</span> 删除 <span class="token keyword">key</span>
DEL <span class="token keyword">user</span>
<span class="token keyword">EXISTS</span> <span class="token keyword">key</span> 判断一个<span class="token keyword">key</span>是否存在
<span class="token keyword">EXISTS</span> <span class="token keyword">user</span>
EXPIRE <span class="token keyword">key</span> seconds  设置过期时间
EXPIRE <span class="token keyword">user</span> <span class="token number">10</span>
TTL <span class="token keyword">key</span> 以秒为单位返回给定<span class="token keyword">key</span>的剩余生存时间
TTL <span class="token keyword">user</span>
<span class="token keyword">TYPE</span> <span class="token keyword">key</span> 返回<span class="token keyword">key</span>所存储的值的类型
<span class="token keyword">TYPE</span> <span class="token keyword">user</span>
</code></pre></div><h3 id="_4-2-哈希值-t134-2-哈希值"><a href="#_4-2-哈希值-t134-2-哈希值" aria-hidden="true" class="header-anchor">#</a> 4.2 哈希值 [#](#t134.2  哈希值)</h3> <p>哈希值是一个字符串类型的Key和值的映射表,特别适合用于存储对象。</p> <h4 id="_4-2-1-hset-hmset-设置值-t144-2-1-hset-hmset-设置值"><a href="#_4-2-1-hset-hmset-设置值-t144-2-1-hset-hmset-设置值" aria-hidden="true" class="header-anchor">#</a> 4.2.1 HSET HMSET 设置值 [#](#t144.2.1 HSET HMSET 设置值)</h4> <div class="language-sql extra-class"><pre class="language-sql"><code>HSET person name 设置单个值
HMSET <span class="token keyword">user</span> name zxmf age <span class="token number">9</span>  设置多个值
</code></pre></div><h4 id="_4-2-2-hget-hgetall-获取值-t154-2-2-hget-hgetall-获取值"><a href="#_4-2-2-hget-hgetall-获取值-t154-2-2-hget-hgetall-获取值" aria-hidden="true" class="header-anchor">#</a> 4.2.2 HGET HGETALL 获取值 [#](#t154.2.2 HGET HGETALL 获取值)</h4> <div class="language-sql extra-class"><pre class="language-sql"><code>HGET <span class="token keyword">user</span> name 获取单个值
HMGET <span class="token keyword">user</span> name age 获取多个值
HGETALL <span class="token keyword">user</span> 获取多有值
</code></pre></div><h4 id="_4-2-3-hdel-key-field-删除键-t164-2-3-hdel-key-field-删除键"><a href="#_4-2-3-hdel-key-field-删除键-t164-2-3-hdel-key-field-删除键" aria-hidden="true" class="header-anchor">#</a> 4.2.3 HDEL key field 删除键 [#](#t164.2.3 HDEL key field 删除键)</h4> <pre><code>HDEL key field
HDEL user name
HGETALL user
</code></pre> <h4 id="_4-2-3-hkeys-获取所有的keys-t174-2-3-hkeys-获取所有的keys"><a href="#_4-2-3-hkeys-获取所有的keys-t174-2-3-hkeys-获取所有的keys" aria-hidden="true" class="header-anchor">#</a> 4.2.3 HKEYS 获取所有的KEYS [#](#t174.2.3 HKEYS 获取所有的KEYS)</h4> <pre><code> HKEYS user
</code></pre> <h3 id="_4-3-列表-t184-3-列表"><a href="#_4-3-列表-t184-3-列表" aria-hidden="true" class="header-anchor">#</a> 4.3 列表 [#](#t184.3  列表)</h3> <p>列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）。</p> <h4 id="_4-3-1-lpush-rpush-添加元素-t194-3-1-lpush-rpush-添加元素"><a href="#_4-3-1-lpush-rpush-添加元素-t194-3-1-lpush-rpush-添加元素" aria-hidden="true" class="header-anchor">#</a> 4.3.1 LPUSH RPUSH 添加元素 [#](#t194.3.1 LPUSH RPUSH 添加元素)</h4> <p>返回列表的长度</p> <div class="language-sql extra-class"><pre class="language-sql"><code>LPUSH ids <span class="token number">2</span>
LPUSH ids <span class="token number">1</span>
RPUSH ids <span class="token number">3</span>
RPUSH ids <span class="token number">4</span>
RPUSH ids  <span class="token number">5</span> <span class="token number">6</span>
</code></pre></div><h4 id="_4-3-2-lrange-查看元素-t204-3-2-lrange-查看元素"><a href="#_4-3-2-lrange-查看元素-t204-3-2-lrange-查看元素" aria-hidden="true" class="header-anchor">#</a> 4.3.2 LRANGE 查看元素 [#](#t204.3.2 LRANGE 查看元素)</h4> <pre><code>LRANGE ids 0 2
LRANGE ids 0 -1
</code></pre> <h4 id="_4-3-3-lpop-rpop-弹出元素-t214-3-3-lpop-rpop-弹出元素"><a href="#_4-3-3-lpop-rpop-弹出元素-t214-3-3-lpop-rpop-弹出元素" aria-hidden="true" class="header-anchor">#</a> 4.3.3 LPOP RPOP 弹出元素 [#](#t214.3.3 LPOP RPOP 弹出元素)</h4> <p>查看并删除</p> <pre><code>LPOP ids
RPOP ids
</code></pre> <h4 id="_4-3-4-lindex-ids-1-t224-3-4-lindex-ids-1"><a href="#_4-3-4-lindex-ids-1-t224-3-4-lindex-ids-1" aria-hidden="true" class="header-anchor">#</a> 4.3.4 LINDEX ids 1 [#](#t224.3.4 LINDEX ids 1)</h4> <p>通过索引获取列表中的元素</p> <pre><code>LINDEX ids 0
</code></pre> <h4 id="_4-3-5-llen-key-t234-3-5-llen-key"><a href="#_4-3-5-llen-key-t234-3-5-llen-key" aria-hidden="true" class="header-anchor">#</a> 4.3.5 LLEN key [#](#t234.3.5 LLEN key)</h4> <p>获取列表长度</p> <pre><code>LLEN ids
</code></pre> <h4 id="_4-3-6-lrem-key-count-value-t244-3-6-lrem-key-count-value"><a href="#_4-3-6-lrem-key-count-value-t244-3-6-lrem-key-count-value" aria-hidden="true" class="header-anchor">#</a> 4.3.6 LREM key count value [#](#t244.3.6 LREM key count value)</h4> <p>移除列表元素</p> <ul><li><p>count &gt; 0 : 从表头开始向表尾搜索，移除与 VALUE 相等的元素，数量为 COUNT 。</p></li> <li><p>count &lt; 0 : 从表尾开始向表头搜索，移除与 VALUE 相等的元素，数量为 COUNT 的绝对值。</p></li> <li><p>count = 0 : 移除表中所有与 VALUE 相等的值。</p> <div class="language-sql extra-class"><pre class="language-sql"><code>LREM ids count <span class="token keyword">value</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> lpush my <span class="token number">1</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> lpush my <span class="token number">2</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> lpush my <span class="token number">2</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> lpush my <span class="token number">2</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> lpush my <span class="token number">3</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> lrange my <span class="token number">0</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> LREM my <span class="token number">2</span> <span class="token number">2</span>
<span class="token punctuation">(</span><span class="token keyword">integer</span><span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> lrange my <span class="token number">0</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
</code></pre></div></li></ul> <h3 id="_4-4-集合-t254-4-集合"><a href="#_4-4-集合-t254-4-集合" aria-hidden="true" class="header-anchor">#</a> 4.4 集合 [#](#t254.4  集合)</h3> <p>集合是字符串类型的无序集合</p> <h4 id="_4-4-1-sadd-添加-t264-4-1-sadd-添加"><a href="#_4-4-1-sadd-添加-t264-4-1-sadd-添加" aria-hidden="true" class="header-anchor">#</a> 4.4.1 SADD 添加 [#](#t264.4.1 SADD 添加)</h4> <p>如果集合中已经存在指定的元素则返回0,如果不存在则添加成功返回1</p> <div class="language-sql extra-class"><pre class="language-sql"><code>SADD tags <span class="token number">1</span>
SADD tags <span class="token number">2</span>
SADD tags <span class="token number">2</span>
SADD tags <span class="token number">3</span>
SADD tags  <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span>
SMEMBERS tags
</code></pre></div><h4 id="_4-4-2-smembers-查看集合-t274-4-2-smembers-查看集合"><a href="#_4-4-2-smembers-查看集合-t274-4-2-smembers-查看集合" aria-hidden="true" class="header-anchor">#</a> 4.4.2 SMEMBERS 查看集合 [#](#t274.4.2 SMEMBERS 查看集合)</h4> <pre><code>SMEMBERS tags
</code></pre> <h4 id="_4-4-3-scard-获取集合元素个数-t284-4-3-scard-获取集合元素个数"><a href="#_4-4-3-scard-获取集合元素个数-t284-4-3-scard-获取集合元素个数" aria-hidden="true" class="header-anchor">#</a> 4.4.3 SCARD 获取集合元素个数 [#](#t284.4.3 SCARD 获取集合元素个数)</h4> <pre><code>SCARD tags
</code></pre> <h4 id="_4-4-4-srem-删除元素-t294-4-4-srem-删除元素"><a href="#_4-4-4-srem-删除元素-t294-4-4-srem-删除元素" aria-hidden="true" class="header-anchor">#</a> 4.4.4 SREM 删除元素 [#](#t294.4.4 SREM 删除元素)</h4> <pre><code>SREM tags member
SREM tags 4
SMEMBERS tags
</code></pre> <h4 id="_4-4-5-集合运算-t304-4-5-集合运算"><a href="#_4-4-5-集合运算-t304-4-5-集合运算" aria-hidden="true" class="header-anchor">#</a> 4.4.5 集合运算 [#](#t304.4.5 集合运算)</h4> <pre><code>SADD A 1 2 3
SADD B 2 3 4
SINTER A B 交集
SDIFF A B 差集
SUNION A B 并集
</code></pre> <h3 id="_4-5-有序集合-t314-5-有序集合"><a href="#_4-5-有序集合-t314-5-有序集合" aria-hidden="true" class="header-anchor">#</a> 4.5 有序集合 [#](#t314.5  有序集合)</h3> <p>有序集合和集合一样也是字符串的集合，而且不能重复 不同之外是每个集合都会关联一个double类型的分数，redis可以通过这个分类来为集合中的元素进行从小到大排序,元素不能重复，但分数可以重复</p> <h4 id="_4-5-1-zadd-添加元素-t324-5-1-zadd-添加元素"><a href="#_4-5-1-zadd-添加元素-t324-5-1-zadd-添加元素" aria-hidden="true" class="header-anchor">#</a> 4.5.1 ZADD 添加元素 [#](#t324.5.1 ZADD 添加元素)</h4> <pre><code>ZADD key score1 member1 [score2 member2]

ZADD levels 1 one
ZADD levels 2 two
ZADD levels 3 three
ZADD levels 4 four
</code></pre> <h4 id="_4-5-2-zcard-获取有序集合的成员数-t334-5-2-zcard-获取有序集合的成员数"><a href="#_4-5-2-zcard-获取有序集合的成员数-t334-5-2-zcard-获取有序集合的成员数" aria-hidden="true" class="header-anchor">#</a> 4.5.2 ZCARD 获取有序集合的成员数 [#](#t334.5.2 ZCARD 获取有序集合的成员数)</h4> <pre><code>ZCARD key
ZCARD levels
</code></pre> <h4 id="_4-5-3-zrange-查看有序集合-t344-5-3-zrange-查看有序集合"><a href="#_4-5-3-zrange-查看有序集合-t344-5-3-zrange-查看有序集合" aria-hidden="true" class="header-anchor">#</a> 4.5.3 ZRANGE 查看有序集合 [#](#t344.5.3 ZRANGE 查看有序集合)</h4> <pre><code>ZRANGE levels  0 -1 按范围查看
ZRANGE levels  0 2 WITHSCORES 按范围查看，并显示分数
</code></pre> <h4 id="_4-5-4-zrem-移除有序集合中的一个或多个成员-t354-5-4-zrem-移除有序集合中的一个或多个成员"><a href="#_4-5-4-zrem-移除有序集合中的一个或多个成员-t354-5-4-zrem-移除有序集合中的一个或多个成员" aria-hidden="true" class="header-anchor">#</a> 4.5.4 ZREM 移除有序集合中的一个或多个成员 [#](#t354.5.4 ZREM 移除有序集合中的一个或多个成员)</h4> <pre><code>ZREM key member [member ...]
ZADD levels 1 one
ZADD levels 2 two
ZREM levels one
 ZRANGE levels  0 -1
</code></pre> <h2 id="_5-node-js中的使用-t365-node-js中的使用"><a href="#_5-node-js中的使用-t365-node-js中的使用" aria-hidden="true" class="header-anchor">#</a> 5. Node.js中的使用 [#](#t365. Node.js中的使用)</h2> <ul><li><p><a href="https://www.npmjs.com/package/redis" target="_blank" rel="noopener noreferrer">redis<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> redis <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'redis'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> client <span class="token operator">=</span> redis<span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token number">6379</span><span class="token punctuation">,</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//1. 字符串类型</span>
client<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'zxmf'</span><span class="token punctuation">,</span> redis<span class="token punctuation">.</span>print<span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> redis<span class="token punctuation">.</span>print<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 集合</span>
client<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'zxmf'</span><span class="token punctuation">,</span> redis<span class="token punctuation">.</span>print<span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">,</span> redis<span class="token punctuation">.</span>print<span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">hget</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> redis<span class="token punctuation">.</span>print<span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">hkeys</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> replies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    replies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        client<span class="token punctuation">.</span><span class="token function">hget</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> item<span class="token punctuation">,</span> redis<span class="token punctuation">.</span>print<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="_6-redis发布订阅-t376-redis发布订阅"><a href="#_6-redis发布订阅-t376-redis发布订阅" aria-hidden="true" class="header-anchor">#</a> 6. Redis发布订阅 [#](#t376. Redis发布订阅)</h2> <p>Redis 发布订阅是一种消息通信模式：发送者发送消息，订阅者接收消息，客户端可以订阅任意数量的频道。</p> <p><img src="assets/redissubscribe.jpg" alt="redissubscribe"></p> <pre><code>SUBSCRIBE chat
PUBLISH chat zxmf
</code></pre> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> client1 <span class="token operator">=</span> redis<span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token number">6379</span><span class="token punctuation">,</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> client2 <span class="token operator">=</span> redis<span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token number">6379</span><span class="token punctuation">,</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
client1<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'food'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client1<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'drink'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client1<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>channel<span class="token punctuation">,</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>channel<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    client1<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token string">'food'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

client2<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'food'</span><span class="token punctuation">,</span> <span class="token string">'面包'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client2<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'drink'</span><span class="token punctuation">,</span> <span class="token string">'桔汁'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    client2<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'food'</span><span class="token punctuation">,</span> <span class="token string">'面包2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client2<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'drink'</span><span class="token punctuation">,</span> <span class="token string">'桔汁2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_7-redis事务-t387-redis事务"><a href="#_7-redis事务-t387-redis事务" aria-hidden="true" class="header-anchor">#</a> 7. Redis事务 [#](#t387. Redis事务)</h2> <p>Redis 事务可以一次执行多个命令</p> <ul><li><p>多个命令可以在执行EXEC命令之前放入缓存队列</p></li> <li><p>收到EXEC命令后会将缓存队列执行</p></li> <li><p>在执行事务的过程中，新提交的并不能被插入到事务执行序列中</p></li> <li><p>DISCARD 可以取消事务，放弃执行事务块内的所有命令</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> MULTI
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">SET</span> account1 <span class="token number">1</span>
QUEUED
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">SET</span> account2 <span class="token number">3</span>
QUEUED
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">EXEC</span>
<span class="token number">1</span><span class="token punctuation">)</span> OK
<span class="token number">2</span><span class="token punctuation">)</span> OK
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> GET account1
<span class="token string">&quot;1&quot;</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> GET account2
<span class="token string">&quot;3&quot;</span>
</code></pre></div></li> <li><p>单个 Redis 命令的执行是原子性的，但 Redis 没有在事务上增加任何维持原子性的机制，所以 Redis 事务的执行并不是原子性的</p></li> <li><p>事务可以理解为一个打包的批量执行脚本，但批量指令并非原子化的操作，中间某条指令的失败不会导致前面已做指令的回滚，也不会造成后续的指令不做</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> redis <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'redis'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> client <span class="token operator">=</span> redis<span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token number">6379</span><span class="token punctuation">,</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">multi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">'user2'</span><span class="token punctuation">,</span> <span class="token string">'name2'</span><span class="token punctuation">,</span> <span class="token string">'zxmf2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">'user2'</span><span class="token punctuation">,</span> <span class="token string">'age2'</span><span class="token punctuation">,</span> <span class="token string">'92'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>redis<span class="token punctuation">.</span>print<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="_8-备份与恢复-t398-备份与恢复"><a href="#_8-备份与恢复-t398-备份与恢复" aria-hidden="true" class="header-anchor">#</a> 8. 备份与恢复 [#](#t398. 备份与恢复)</h2> <h3 id="_8-1-备份-t408-1-备份"><a href="#_8-1-备份-t408-1-备份" aria-hidden="true" class="header-anchor">#</a> 8.1 备份 [#](#t408.1 备份)</h3> <pre><code>127.0.0.1:6379&gt; SAVE
OK
</code></pre> <blockquote><p>该命令将在 redis 安装目录中创建dump.rdb文件。</p></blockquote> <h3 id="_8-2-恢复-t418-2-恢复"><a href="#_8-2-恢复-t418-2-恢复" aria-hidden="true" class="header-anchor">#</a> 8.2 恢复 [#](#t418.2 恢复)</h3> <blockquote><p>将备份文件 (dump.rdb) 移动到 redis 安装目录并启动服务</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>CONFIG GET dir
BGSAVE
</code></pre></div><h2 id="_8-安全-t428-安全"><a href="#_8-安全-t428-安全" aria-hidden="true" class="header-anchor">#</a> 8. 安全 [#](#t428. 安全)</h2> <p>可以通过 redis 的配置文件设置密码参数，这样客户端连接到 redis 服务就需要密码验证，这样可以让你的 redis 服务更安全。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> CONFIG get requirepass
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;requirepass&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;&quot;</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> CONFIG <span class="token keyword">set</span> requirepass <span class="token string">'zxmf'</span>
OK
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> CONFIG get requirepass
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> NOAUTH Authentication required<span class="token punctuation">.</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> AUTH zxmf
OK
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">&gt;</span> CONFIG get requirepass
</code></pre></div></div> <!----> <div class="content page-nav"><p class="inner"><span class="prev">
          ← <a href="/fe/32.ant.html" class="prev">
            配置项目
          </a></span> <span class="next"><a href="/fe/34.unittest.html">
            单元测试
          </a> →
        </span></p></div> <div id="comment-container"><div class="gt-container"><div class="gt-initing"><i class="gt-loader"></i> <p class="gt-initing-text">Gitalking ...</p></div> <!----> <!----> <div><div class="gt-header"><a class="gt-avatar-github"><span class="gt-ico gt-ico-github"><span class="gt-svg"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M64 524C64 719.602 189.356 885.926 364.113 947.017 387.65799 953 384 936.115 384 924.767L384 847.107C248.118 863.007 242.674 773.052 233.5 758.001 215 726.501 171.5 718.501 184.5 703.501 215.5 687.501 247 707.501 283.5 761.501 309.956 800.642 361.366 794.075 387.658 787.497 393.403 763.997 405.637 743.042 422.353 726.638 281.774 701.609 223 615.67 223 513.5 223 464.053 239.322 418.406 271.465 381.627 251.142 320.928 273.421 269.19 276.337 261.415 334.458 256.131 394.888 302.993 399.549 306.685 432.663 297.835 470.341 293 512.5 293 554.924 293 592.81 297.896 626.075 306.853 637.426 298.219 693.46 258.054 747.5 262.966 750.382 270.652 772.185 321.292 753.058 381.083 785.516 417.956 802 463.809 802 513.5 802 615.874 742.99 701.953 601.803 726.786 625.381 750.003 640 782.295 640 818.008L640 930.653C640.752 939.626 640 948.664978 655.086 948.665 832.344 888.962 960 721.389 960 524 960 276.576 759.424 76 512 76 264.577 76 64 276.576 64 524Z"></path>
</svg>
</span> <!----></span></a> <div class="gt-header-comment"><textarea placeholder="Leave a comment" class="gt-header-textarea"></textarea> <div class="gt-header-preview markdown-body hide"></div> <div class="gt-header-controls"><a href="https://guides.github.com/features/mastering-markdown/" target="_blank" class="gt-header-controls-tip"><span class="gt-ico gt-ico-tip"><span class="gt-svg"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 366.949535c-16.065554 0-29.982212 13.405016-29.982212 29.879884l0 359.070251c0 16.167882 13.405016 29.879884 29.982212 29.879884 15.963226 0 29.879884-13.405016 29.879884-29.879884L541.879884 396.829419C541.879884 380.763865 528.474868 366.949535 512 366.949535L512 366.949535z"
    p-id="3083"></path>
  <path d="M482.017788 287.645048c0-7.776956 3.274508-15.553912 8.80024-21.181973 5.525732-5.525732 13.302688-8.80024 21.181973-8.80024 7.776956 0 15.553912 3.274508 21.079644 8.80024 5.525732 5.62806 8.80024 13.405016 8.80024 21.181973 0 7.776956-3.274508 15.656241-8.80024 21.181973-5.525732 5.525732-13.405016 8.697911-21.079644 8.697911-7.879285 0-15.656241-3.274508-21.181973-8.697911C485.292295 303.301289 482.017788 295.524333 482.017788 287.645048L482.017788 287.645048z"
    p-id="3084"></path>
  <path d="M512 946.844409c-239.8577 0-434.895573-195.037873-434.895573-434.895573 0-239.8577 195.037873-434.895573 434.895573-434.895573 239.755371 0 434.895573 195.037873 434.895573 434.895573C946.895573 751.806535 751.755371 946.844409 512 946.844409zM512 126.17088c-212.740682 0-385.880284 173.037274-385.880284 385.777955 0 212.740682 173.037274 385.777955 385.880284 385.777955 212.740682 0 385.777955-173.037274 385.777955-385.777955C897.777955 299.208154 724.740682 126.17088 512 126.17088z"
    p-id="3085"></path>
</svg>
</span> <span class="gt-ico-text">Markdown is supported</span></span></a> <!----> <button class="gt-btn gt-btn-preview"><span class="gt-btn-text">Preview</span> <!----></button> <button class="gt-btn gt-btn-login"><span class="gt-btn-text">Login with GitHub</span> <!----></button></div></div></div> <div class="gt-comments"><span></span> <p class="gt-comments-null">
                Be the first guy leaving a comment!
            </p> <!----></div></div></div></div></div></div> <!----></div> <div class="tool-group"><!----></div></div> <!----></div> <div class="background-mask" style="background:#f6f6f6;"></div></div></div>
    <script src="/assets/js/app.35b69267.js" defer></script><script src="/assets/js/78.0a67366d.js" defer></script>
  </body>
</html>
