<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>nginx | Myfun&#39;s Blog</title>
    <meta name="description" content="nginx">
    <link rel="icon" href="/favicon.ico">
    <meta name="keywords" content="nginx">
    <link rel="preload" href="/assets/css/0.styles.6bc9bf16.css" as="style"><link rel="preload" href="/assets/js/app.35b69267.js" as="script"><link rel="preload" href="/assets/js/95.7c55098e.js" as="script"><link rel="prefetch" href="/assets/js/10.a2f6c6ac.js"><link rel="prefetch" href="/assets/js/100.24b9a366.js"><link rel="prefetch" href="/assets/js/101.085f0585.js"><link rel="prefetch" href="/assets/js/102.66d5674f.js"><link rel="prefetch" href="/assets/js/103.7f71429c.js"><link rel="prefetch" href="/assets/js/104.13b0f535.js"><link rel="prefetch" href="/assets/js/105.0a093e85.js"><link rel="prefetch" href="/assets/js/106.a4a1db62.js"><link rel="prefetch" href="/assets/js/107.2634aacf.js"><link rel="prefetch" href="/assets/js/108.b393516d.js"><link rel="prefetch" href="/assets/js/109.769b78fb.js"><link rel="prefetch" href="/assets/js/11.fb483cc4.js"><link rel="prefetch" href="/assets/js/12.24a41994.js"><link rel="prefetch" href="/assets/js/13.a4762474.js"><link rel="prefetch" href="/assets/js/14.4a737bc9.js"><link rel="prefetch" href="/assets/js/15.548f4e99.js"><link rel="prefetch" href="/assets/js/16.b0d2654c.js"><link rel="prefetch" href="/assets/js/17.d43ab467.js"><link rel="prefetch" href="/assets/js/18.0c8f5f87.js"><link rel="prefetch" href="/assets/js/19.19ef59f8.js"><link rel="prefetch" href="/assets/js/2.436a35aa.js"><link rel="prefetch" href="/assets/js/20.24296203.js"><link rel="prefetch" href="/assets/js/21.c486888f.js"><link rel="prefetch" href="/assets/js/22.7e2305f9.js"><link rel="prefetch" href="/assets/js/23.e55bab1b.js"><link rel="prefetch" href="/assets/js/24.1468433c.js"><link rel="prefetch" href="/assets/js/25.6d82837f.js"><link rel="prefetch" href="/assets/js/26.3c4b2f18.js"><link rel="prefetch" href="/assets/js/27.21725a4f.js"><link rel="prefetch" href="/assets/js/28.db16c479.js"><link rel="prefetch" href="/assets/js/29.cb9512e5.js"><link rel="prefetch" href="/assets/js/3.5c82c0f7.js"><link rel="prefetch" href="/assets/js/30.a4c25096.js"><link rel="prefetch" href="/assets/js/31.81741530.js"><link rel="prefetch" href="/assets/js/32.da6d2ac6.js"><link rel="prefetch" href="/assets/js/33.f6164ecd.js"><link rel="prefetch" href="/assets/js/34.0344ad22.js"><link rel="prefetch" href="/assets/js/35.07d4c8d3.js"><link rel="prefetch" href="/assets/js/36.2c6adcff.js"><link rel="prefetch" href="/assets/js/37.ceb5e95e.js"><link rel="prefetch" href="/assets/js/38.d39e96e5.js"><link rel="prefetch" href="/assets/js/39.fcf34164.js"><link rel="prefetch" href="/assets/js/4.267db630.js"><link rel="prefetch" href="/assets/js/40.bdf31768.js"><link rel="prefetch" href="/assets/js/41.cc61eccd.js"><link rel="prefetch" href="/assets/js/42.042e4349.js"><link rel="prefetch" href="/assets/js/43.b385d348.js"><link rel="prefetch" href="/assets/js/44.7669f3e2.js"><link rel="prefetch" href="/assets/js/45.2fb532f4.js"><link rel="prefetch" href="/assets/js/46.0cc86442.js"><link rel="prefetch" href="/assets/js/47.30448b83.js"><link rel="prefetch" href="/assets/js/48.8893a5ed.js"><link rel="prefetch" href="/assets/js/49.ed7be1ae.js"><link rel="prefetch" href="/assets/js/5.d8a5933e.js"><link rel="prefetch" href="/assets/js/50.e4af394b.js"><link rel="prefetch" href="/assets/js/51.502ca2a7.js"><link rel="prefetch" href="/assets/js/52.f9768ea6.js"><link rel="prefetch" href="/assets/js/53.0c762369.js"><link rel="prefetch" href="/assets/js/54.dad23d00.js"><link rel="prefetch" href="/assets/js/55.4298d6a4.js"><link rel="prefetch" href="/assets/js/56.d8505fa7.js"><link rel="prefetch" href="/assets/js/57.63d197ce.js"><link rel="prefetch" href="/assets/js/58.ae9a3671.js"><link rel="prefetch" href="/assets/js/59.cb04d7cd.js"><link rel="prefetch" href="/assets/js/6.a83fef9a.js"><link rel="prefetch" href="/assets/js/60.0cedb385.js"><link rel="prefetch" href="/assets/js/61.a5c3f820.js"><link rel="prefetch" href="/assets/js/62.fc2d969d.js"><link rel="prefetch" href="/assets/js/63.53f087e3.js"><link rel="prefetch" href="/assets/js/64.9384bc9a.js"><link rel="prefetch" href="/assets/js/65.bb5db767.js"><link rel="prefetch" href="/assets/js/66.86940f42.js"><link rel="prefetch" href="/assets/js/67.37215862.js"><link rel="prefetch" href="/assets/js/68.e0c14875.js"><link rel="prefetch" href="/assets/js/69.276f0d65.js"><link rel="prefetch" href="/assets/js/7.7e7cde5e.js"><link rel="prefetch" href="/assets/js/70.0fb38ae4.js"><link rel="prefetch" href="/assets/js/71.7c824b27.js"><link rel="prefetch" href="/assets/js/72.bc39810c.js"><link rel="prefetch" href="/assets/js/73.9917d9a4.js"><link rel="prefetch" href="/assets/js/74.7912f7da.js"><link rel="prefetch" href="/assets/js/75.c193b7ec.js"><link rel="prefetch" href="/assets/js/76.ecd4e536.js"><link rel="prefetch" href="/assets/js/77.842c5aba.js"><link rel="prefetch" href="/assets/js/78.0a67366d.js"><link rel="prefetch" href="/assets/js/79.324df7d4.js"><link rel="prefetch" href="/assets/js/8.7063c274.js"><link rel="prefetch" href="/assets/js/80.68c6326b.js"><link rel="prefetch" href="/assets/js/81.a7df7b21.js"><link rel="prefetch" href="/assets/js/82.abd9c0c2.js"><link rel="prefetch" href="/assets/js/83.fd0d8457.js"><link rel="prefetch" href="/assets/js/84.148b432c.js"><link rel="prefetch" href="/assets/js/85.32148693.js"><link rel="prefetch" href="/assets/js/86.7dc5fe11.js"><link rel="prefetch" href="/assets/js/87.bd1be392.js"><link rel="prefetch" href="/assets/js/88.2c0b86aa.js"><link rel="prefetch" href="/assets/js/89.3038cc8d.js"><link rel="prefetch" href="/assets/js/9.5cab2997.js"><link rel="prefetch" href="/assets/js/90.fb4057a1.js"><link rel="prefetch" href="/assets/js/91.4aa5adaf.js"><link rel="prefetch" href="/assets/js/92.aea0a62e.js"><link rel="prefetch" href="/assets/js/93.e2d0e9a7.js"><link rel="prefetch" href="/assets/js/94.a9e33a20.js"><link rel="prefetch" href="/assets/js/96.c8dfe1c0.js"><link rel="prefetch" href="/assets/js/97.35fc7df3.js"><link rel="prefetch" href="/assets/js/98.551b3ede.js"><link rel="prefetch" href="/assets/js/99.a8f5ffc4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6bc9bf16.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="wrap"><div class="theme-container container no-sidebar"><header class="navbar"><div class="nav-header"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" class="logo"> <span class="site-name can-hide">
        Myfun's Blog
      </span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/interview/" class="nav-link">InterviewMap</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/css_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">CSS_Tricks</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/js_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">JS_Tricks</a></div><div class="nav-item"><a href="/tags/" class="nav-link">Tags</a></div><div class="nav-item"><a href="https://github.com/zhangximufeng" target="_blank" rel="noopener noreferrer" class="nav-link">Github</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/animate_resume_ts/" target="_blank" rel="noopener noreferrer" class="nav-link">About</a></div> <!----></nav> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/interview/" class="nav-link">InterviewMap</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/css_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">CSS_Tricks</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/js_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">JS_Tricks</a></div><div class="nav-item"><a href="/tags/" class="nav-link">Tags</a></div><div class="nav-item"><a href="https://github.com/zhangximufeng" target="_blank" rel="noopener noreferrer" class="nav-link">Github</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/animate_resume_ts/" target="_blank" rel="noopener noreferrer" class="nav-link">About</a></div> <!----></nav> <!----></div> <div class="page-container"><div><div class="page card"><div class="content-header"><!----> <span class="page-timestamp">2018-10-08</span></div> <div class="content"><p></p><div class="table-of-contents"><ul><li><a href="#nginx">nginx</a><ul><li><a href="#_2-学习环境">2\. 学习环境</a></li><li><a href="#_3-nginx的优势">3\. nginx的优势</a></li><li><a href="#_4-nginx安装">4\. nginx安装</a></li><li><a href="#_5-目录">5\. 目录</a></li><li><a href="#_5-3-编译参数">5.3 编译参数</a></li><li><a href="#_5-配置文件">5\. 配置文件</a></li><li><a href="#_6-启动和重新加载">6\. 启动和重新加载</a></li><li><a href="#_7-日志类型">7\. 日志类型</a></li><li><a href="#_8-nginx实战">8\. nginx实战</a></li></ul></li></ul></div><p></p> <h1 id="nginx"><a href="#nginx" aria-hidden="true" class="header-anchor">#</a> nginx</h1> <hr> <p>nginx是一个开源且高性能、可靠的HTTP中间件和代理服务器</p> <h2 id="_2-学习环境"><a href="#_2-学习环境" aria-hidden="true" class="header-anchor">#</a> 2. 学习环境</h2> <h3 id="_2-1-操作系统"><a href="#_2-1-操作系统" aria-hidden="true" class="header-anchor">#</a> 2.1 操作系统</h3> <p>CENTOS&gt;=7.0,位数 X64 CENTOS 7.2</p> <h3 id="_2-2-环境确认"><a href="#_2-2-环境确认" aria-hidden="true" class="header-anchor">#</a> 2.2 环境确认</h3> <h4 id="_2-2-1-关闭-iptables"><a href="#_2-2-1-关闭-iptables" aria-hidden="true" class="header-anchor">#</a> 2.2.1 关闭 iptables</h4> <p>iptables命令是Linux上常用的防火墙软件</p> <p>停止防火墙</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl stop firewalld.service
</code></pre></div><p>永久关闭防火墙</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl disable firewalld.service
</code></pre></div><h4 id="_2-2-2-确认停用-selinux"><a href="#_2-2-2-确认停用-selinux" aria-hidden="true" class="header-anchor">#</a> 2.2.2 确认停用 selinux</h4> <ul><li><p>安全增强型 Linux（Security-Enhanced Linux）简称 SELinux，它是一个 Linux 内核模块，也是 Linux 的一个安全子系统。</p></li> <li><p>SELinux 主要作用就是最大限度地减小系统中服务进程可访问的资源（最小权限原则）。</p></li></ul> <table><thead><tr><th style="text-align:left">功能</th> <th style="text-align:left">命令</th></tr></thead> <tbody><tr><td style="text-align:left">检查状态</td> <td style="text-align:left">getenforce</td></tr> <tr><td style="text-align:left">检查状态</td> <td style="text-align:left">/usr/sbin/sestatus -v</td></tr> <tr><td style="text-align:left">临时关闭</td> <td style="text-align:left">setenforce 0</td></tr> <tr><td style="text-align:left">永久关闭</td> <td style="text-align:left">/etc/selinux/config SELINUX=enforcing改SELINUX=disabled</td></tr></tbody></table> <h4 id="_2-2-3-安装依赖模块"><a href="#_2-2-3-安装依赖模块" aria-hidden="true" class="header-anchor">#</a> 2.2.3 安装依赖模块</h4> <pre><code>yum  -y install gcc gcc-c++ autoconf pcre pcre-devel make automake
yum  -y install wget httpd-tools vim
</code></pre> <h2 id="_3-nginx的优势"><a href="#_3-nginx的优势" aria-hidden="true" class="header-anchor">#</a> 3. nginx的优势</h2> <ul><li>IO多路复用 多个描述符的IO操作都能在一个线程里并发交替顺序完成，复用线程
<ul><li>select 线性遍历文件描述符列表 1. 效率低下 2.最多只能有1024</li> <li>epoll 每当fd就绪，采用系统回调函数将fd放入 1.效率高 2.没有1024限制</li></ul></li> <li>CPU亲和 一种把CPU核心和Nginx工作进程绑定方式，把每个worker进程固定在一个CPU上执行，减少切换CPU和提交缓存命中率,获得更好的性能。</li> <li>sendfile 零拷贝传输模式 ![usercore]</li></ul> <p><img src="assets/usercore.jpg" alt="usercore"></p> <h2 id="_4-nginx安装"><a href="#_4-nginx安装" aria-hidden="true" class="header-anchor">#</a> 4. nginx安装</h2> <h3 id="_4-1-版本分类"><a href="#_4-1-版本分类" aria-hidden="true" class="header-anchor">#</a> 4.1 版本分类</h3> <ul><li>Mainline version 开发版</li> <li>Stable version 稳定版</li> <li>Legacy versions 历史版本</li></ul> <h3 id="_4-2-下载地址"><a href="#_4-2-下载地址" aria-hidden="true" class="header-anchor">#</a> 4.2 下载地址</h3> <ul><li><a href="http://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">nginx<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://nginx.org/en/linux_packages.html#stable" target="_blank" rel="noopener noreferrer">linux_packages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="_4-3-centos下yum安装"><a href="#_4-3-centos下yum安装" aria-hidden="true" class="header-anchor">#</a> 4.3 CentOS下YUM安装</h3> <p>/etc/yum.repos.d/nginx.repo</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token punctuation">[</span>nginx<span class="token punctuation">]</span>
name<span class="token operator">=</span>nginx repo
baseurl<span class="token operator">=</span><span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>nginx<span class="token punctuation">.</span>org<span class="token operator">/</span>packages<span class="token operator">/</span>centos<span class="token operator">/</span><span class="token number">7</span><span class="token operator">/</span><span class="token variable">$basearch</span><span class="token operator">/</span>
gpgcheck<span class="token operator">=</span><span class="token number">0</span>
enabled<span class="token operator">=</span><span class="token number">1</span>
</code></pre></div><pre><code>yum install nginx -y
nginx -v
nginx -V
</code></pre> <h2 id="_5-目录"><a href="#_5-目录" aria-hidden="true" class="header-anchor">#</a> 5. 目录</h2> <h3 id="_5-1-安装目录"><a href="#_5-1-安装目录" aria-hidden="true" class="header-anchor">#</a> 5.1 安装目录</h3> <p>查看配置文件和目录</p> <pre><code>rpm -ql nginx
</code></pre> <h3 id="_5-2-配置文件"><a href="#_5-2-配置文件" aria-hidden="true" class="header-anchor">#</a> 5.2 配置文件</h3> <table><thead><tr><th>类型</th> <th>路径</th> <th>用途</th></tr></thead> <tbody><tr><td>配置文件</td> <td>/etc/logrotate.d/nginx</td> <td>用于logrotate服务的日志切割</td></tr> <tr><td>配置文件</td> <td>/etc/nginx /etc/nginx/nginx.conf /etc/nginx/conf.d /etc/nginx/conf.d/default.conf</td> <td>主配置文件</td></tr> <tr><td>配置文件</td> <td>/etc/nginx/fastcgi_params /etc/nginx/scgi_params /etc/nginx/uwsgi_params</td> <td>cgi配置,fastcgi配置</td></tr> <tr><td>配置文件</td> <td>/etc/nginx/koi-utf /etc/nginx/koi-win /etc/nginx/win-utf</td> <td>编码转换映射转化文件</td></tr> <tr><td>配置文件</td> <td>/etc/nginx/mime.types</td> <td>设置http协议的Content-Type与扩展名对应关系</td></tr> <tr><td>配置文件</td> <td>/usr/lib/systemd/system/nginx-debug.service /usr/lib/systemd/system/nginx.service /etc/sysconfig/nginx /etc/sysconfig/nginx-debug</td> <td>用于配置系统守护进程管理器管理方式</td></tr> <tr><td>配置文件</td> <td>/etc/nginx/modules /usr/lib64/nginx/modules</td> <td>nginx模块目录</td></tr> <tr><td>命令</td> <td>/usr/share/doc/nginx-1.14.0 /usr/share/doc/nginx-1.14.0/COPYRIGHT</td> <td>nginx的手册和帮助文件</td></tr> <tr><td>目录</td> <td>/var/cache/nginx</td> <td>nginx的缓存目录</td></tr> <tr><td>目录</td> <td>/var/log/nginx</td> <td>nginx的日志目录</td></tr></tbody></table> <h2 id="_5-3-编译参数"><a href="#_5-3-编译参数" aria-hidden="true" class="header-anchor">#</a> 5.3 编译参数</h2> <h3 id="_5-3-1-安装目录和路径"><a href="#_5-3-1-安装目录和路径" aria-hidden="true" class="header-anchor">#</a> 5.3.1 安装目录和路径</h3> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token operator">--</span>prefix<span class="token operator">=</span><span class="token operator">/</span>etc<span class="token operator">/</span>nginx
<span class="token operator">--</span>sbin<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx
<span class="token operator">--</span>modules<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>lib64<span class="token operator">/</span>nginx<span class="token operator">/</span>modules
<span class="token operator">--</span>conf<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>nginx<span class="token punctuation">.</span>conf
<span class="token operator">--</span>error<span class="token operator">-</span>log<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>error<span class="token punctuation">.</span>log
<span class="token operator">--</span><span class="token keyword">http</span><span class="token operator">-</span>log<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>access<span class="token punctuation">.</span>log
<span class="token operator">--</span><span class="token keyword">pid</span><span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>nginx<span class="token punctuation">.</span><span class="token keyword">pid</span>
<span class="token operator">--</span>lock<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>nginx<span class="token punctuation">.</span>lock
</code></pre></div><h3 id="_5-3-2-执行对应模块时，nginx所保留的临时性文件"><a href="#_5-3-2-执行对应模块时，nginx所保留的临时性文件" aria-hidden="true" class="header-anchor">#</a> 5.3.2 执行对应模块时，nginx所保留的临时性文件</h3> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token operator">--</span><span class="token keyword">http</span><span class="token operator">-</span>client<span class="token operator">-</span>body<span class="token operator">-</span>temp<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>var<span class="token operator">/</span>cache<span class="token operator">/</span>nginx<span class="token operator">/</span>client_temp
<span class="token operator">--</span><span class="token keyword">http</span><span class="token operator">-</span><span class="token keyword">proxy</span><span class="token operator">-</span>temp<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>var<span class="token operator">/</span>cache<span class="token operator">/</span>nginx<span class="token operator">/</span>proxy_temp
<span class="token operator">--</span><span class="token keyword">http</span><span class="token operator">-</span>fastcgi<span class="token operator">-</span>temp<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>var<span class="token operator">/</span>cache<span class="token operator">/</span>nginx<span class="token operator">/</span>fastcgi_temp
<span class="token operator">--</span><span class="token keyword">http</span><span class="token operator">-</span>uwsgi<span class="token operator">-</span>temp<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>var<span class="token operator">/</span>cache<span class="token operator">/</span>nginx<span class="token operator">/</span>uwsgi_temp
<span class="token operator">--</span><span class="token keyword">http</span><span class="token operator">-</span><span class="token keyword">scgi</span><span class="token operator">-</span>temp<span class="token operator">-</span>path<span class="token operator">=</span><span class="token operator">/</span>var<span class="token operator">/</span>cache<span class="token operator">/</span>nginx<span class="token operator">/</span>scgi_temp
</code></pre></div><h3 id="_5-3-3-设置nginx进程启动的用户和用户组"><a href="#_5-3-3-设置nginx进程启动的用户和用户组" aria-hidden="true" class="header-anchor">#</a> 5.3.3 设置nginx进程启动的用户和用户组</h3> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token operator">--</span><span class="token keyword">user</span><span class="token operator">=</span>nginx
<span class="token operator">--</span>group<span class="token operator">=</span>nginx
</code></pre></div><h3 id="_5-3-4-设置额外的参数将被添加到cflags变量"><a href="#_5-3-4-设置额外的参数将被添加到cflags变量" aria-hidden="true" class="header-anchor">#</a> 5.3.4 设置额外的参数将被添加到CFLAGS变量</h3> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token operator">--</span>with<span class="token operator">-</span>cc<span class="token operator">-</span>opt<span class="token operator">=</span>'<span class="token operator">-</span>O2 <span class="token operator">-</span>g <span class="token operator">-</span>pipe <span class="token operator">-</span>Wall <span class="token operator">-</span>Wp<span class="token punctuation">,</span><span class="token operator">-</span>D_FORTIFY_SOURCE<span class="token operator">=</span><span class="token number">2</span> <span class="token operator">-</span>fexceptions <span class="token operator">-</span>fstack<span class="token operator">-</span>protector<span class="token operator">-</span>strong
</code></pre></div><h3 id="_5-3-5-设置附加的参数，链接系统库"><a href="#_5-3-5-设置附加的参数，链接系统库" aria-hidden="true" class="header-anchor">#</a> 5.3.5 设置附加的参数，链接系统库</h3> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token operator">--</span>with<span class="token operator">-</span>ld<span class="token operator">-</span>opt<span class="token operator">=</span><span class="token string">'-Wl,-z,relro -Wl,-z,now -pie'</span>
</code></pre></div><h3 id="_5-3-6-其它参数"><a href="#_5-3-6-其它参数" aria-hidden="true" class="header-anchor">#</a> 5.3.6 其它参数</h3> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token operator">--</span>with<span class="token operator">-</span>compat
<span class="token operator">--</span>with<span class="token operator">-</span>file<span class="token operator">-</span><span class="token keyword">aio</span>
<span class="token operator">--</span>with<span class="token operator">-</span>threads
<span class="token operator">--</span>with<span class="token operator">-</span>http_addition_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_auth_request_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_dav_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_flv_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_gunzip_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_gzip_static_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_mp4_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_random_index_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_realip_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_secure_link_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_slice_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_ssl_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_stub_status_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_sub_module
<span class="token operator">--</span>with<span class="token operator">-</span>http_v2_module
<span class="token operator">--</span>with<span class="token operator">-</span>mail
<span class="token operator">--</span>with<span class="token operator">-</span>mail_ssl_module
<span class="token operator">--</span>with<span class="token operator">-</span>stream
<span class="token operator">--</span>with<span class="token operator">-</span>stream_realip_module
<span class="token operator">--</span>with<span class="token operator">-</span>stream_ssl_module
<span class="token operator">--</span>with<span class="token operator">-</span>stream_ssl_preread_module
<span class="token operator">--</span>param<span class="token operator">=</span>ssp<span class="token operator">-</span>buffer<span class="token operator">-</span>size<span class="token operator">=</span><span class="token number">4</span> <span class="token operator">-</span>grecord<span class="token operator">-</span>gcc<span class="token operator">-</span>switches <span class="token operator">-</span>m64 <span class="token operator">-</span>mtune<span class="token operator">=</span>generic <span class="token operator">-</span>fPIC'
</code></pre></div><h2 id="_5-配置文件"><a href="#_5-配置文件" aria-hidden="true" class="header-anchor">#</a> 5. 配置文件</h2> <ul><li>/etc/nginx/nginx.conf</li> <li>/etc/nginx/conf.d/*.conf /etc/nginx/conf.d/default.conf</li></ul> <h3 id="_5-1-全局和服务配置"><a href="#_5-1-全局和服务配置" aria-hidden="true" class="header-anchor">#</a> 5.1 全局和服务配置</h3> <table><thead><tr><th>分类</th> <th>配置项</th> <th>作用</th></tr></thead> <tbody><tr><td>全局</td> <td>user</td> <td>设置nginx服务的系统使用用户</td></tr> <tr><td>全局</td> <td>worker_processes</td> <td>工作进程数,一般和CPU数量相同</td></tr> <tr><td>全局</td> <td>error_log</td> <td>nginx的错误日志</td></tr> <tr><td>全局</td> <td>pid</td> <td>nginx服务启动时的pid</td></tr></tbody></table> <h3 id="_5-2-全局和服务配置"><a href="#_5-2-全局和服务配置" aria-hidden="true" class="header-anchor">#</a> 5.2 全局和服务配置</h3> <table><thead><tr><th>分类</th> <th>配置项</th> <th>作用</th></tr></thead> <tbody><tr><td>events</td> <td>worker_connections</td> <td>每个进程允许的最大连接数 10000</td></tr> <tr><td>events</td> <td>use</td> <td>指定使用哪种模型（select/poll/epoll）,建议让nginx自动选择,linux内核2.6以上一般能使用epoll，提高性能。</td></tr></tbody></table> <p>/etc/nginx/nginx.conf</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">user</span>  nginx<span class="token punctuation">;</span>   设置nginx服务的系统使用用户
<span class="token keyword">worker_processes</span>  <span class="token number">1</span><span class="token punctuation">;</span>  工作进程数<span class="token punctuation">,</span>一般和CPU数量相同

<span class="token keyword">error_log</span>  <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>error<span class="token punctuation">.</span>log warn<span class="token punctuation">;</span>   nginx的错误日志
<span class="token keyword">pid</span>        <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>nginx<span class="token punctuation">.</span><span class="token keyword">pid</span><span class="token punctuation">;</span>   nginx服务启动时的<span class="token keyword">pid</span>

<span class="token keyword">events</span> <span class="token punctuation">{</span>
    <span class="token keyword">worker_connections</span>  <span class="token number">1024</span><span class="token punctuation">;</span>每个进程允许的最大连接数 <span class="token number">10000</span>
<span class="token punctuation">}</span>

<span class="token keyword">http</span> <span class="token punctuation">{</span>
    <span class="token keyword">include</span>       <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>mime<span class="token punctuation">.</span><span class="token keyword">types</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">/</span>文件后缀和类型类型的对应关系
    <span class="token keyword">default_type</span>  application<span class="token operator">/</span>octet<span class="token operator">-</span>stream<span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">/</span>默认content<span class="token operator">-</span>type

    <span class="token keyword">log_format</span>  main  <span class="token string">'$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</span>
                      <span class="token string">'$status $body_bytes_sent &quot;$http_referer&quot; '</span>
                      <span class="token string">'&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'</span><span class="token punctuation">;</span>  <span class="token operator">/</span><span class="token operator">/</span>日志记录格式

    <span class="token keyword">access_log</span>  <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>access<span class="token punctuation">.</span>log  main<span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">/</span>默认访问日志

    <span class="token keyword">sendfile</span>        on<span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">/</span>启用<span class="token keyword">sendfile</span>
    <span class="token comment">#tcp_nopush     on;//懒发送</span>

    <span class="token keyword">keepalive_timeout</span>  <span class="token number">65</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">/</span>超时时间是<span class="token number">65</span>秒

    <span class="token comment">#gzip  on;gzip压缩</span>

    <span class="token keyword">include</span> <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>conf<span class="token punctuation">.</span>d<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>conf<span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">/</span>包含的子配置文件
<span class="token punctuation">}</span>
</code></pre></div><p>default.conf</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">listen</span>       <span class="token number">80</span><span class="token punctuation">;</span>  <span class="token operator">/</span><span class="token operator">/</span>监听的端口号
    <span class="token keyword">server_name</span>  localhost<span class="token punctuation">;</span>  <span class="token operator">/</span><span class="token operator">/</span>用域名方式访问的地址

    <span class="token comment">#charset koi8-r; //编码</span>
    <span class="token comment">#access_log  /var/log/nginx/host.access.log  main;  //访问日志文件和名称</span>

    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token keyword">root</span>   <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>html<span class="token punctuation">;</span>  <span class="token operator">/</span><span class="token operator">/</span>静态文件根目录
        <span class="token keyword">index</span>  <span class="token keyword">index</span><span class="token punctuation">.</span>html <span class="token keyword">index</span><span class="token punctuation">.</span>htm<span class="token punctuation">;</span>  <span class="token operator">/</span><span class="token operator">/</span>首页的索引文件
    <span class="token punctuation">}</span>

    <span class="token comment">#error_page  404              /404.html;  //指定错误页面</span>

    <span class="token comment"># redirect server error pages to the static page /50x.html</span>
    <span class="token comment"># 把后台错误重定向到静态的50x.html页面</span>
    <span class="token keyword">error_page</span>   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
    <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>
        <span class="token keyword">root</span>   <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span>
    <span class="token comment"># 代理PHP脚本到80端口上的apache服务器</span>
    <span class="token comment">#location ~ \.php$ {</span>
    <span class="token comment">#    proxy_pass   http://127.0.0.1;</span>
    <span class="token comment">#}</span>

    <span class="token comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span>
    <span class="token comment"># 把PHP脚本9000端口上监听的FastCGI服务</span>
    <span class="token comment">#location ~ \.php$ {</span>
    <span class="token comment">#    root           html;</span>
    <span class="token comment">#    fastcgi_pass   127.0.0.1:9000;</span>
    <span class="token comment">#    fastcgi_index  index.php;</span>
    <span class="token comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span>
    <span class="token comment">#    include        fastcgi_params;</span>
    <span class="token comment">#}</span>

    <span class="token comment"># deny access to .htaccess files, if Apache's document root</span>
    <span class="token comment"># concurs with nginx's one</span>
    <span class="token comment"># 不允许访问.htaccess文件</span>
    <span class="token comment">#location ~ /\.ht {</span>
    <span class="token comment">#    deny  all;</span>
    <span class="token comment">#}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_6-启动和重新加载"><a href="#_6-启动和重新加载" aria-hidden="true" class="header-anchor">#</a> 6. 启动和重新加载</h2> <div class="language-nginx extra-class"><pre class="language-nginx"><code>systemctl restart nginx<span class="token punctuation">.</span>service
systemctl reload nginx<span class="token punctuation">.</span>service
nginx <span class="token operator">-</span>s reload
</code></pre></div><h2 id="_7-日志类型"><a href="#_7-日志类型" aria-hidden="true" class="header-anchor">#</a> 7. 日志类型</h2> <h3 id="_7-1-日志类型"><a href="#_7-1-日志类型" aria-hidden="true" class="header-anchor">#</a> 7.1 日志类型</h3> <ul><li>access_.log 访问日志</li> <li>error.log 错误日志</li></ul> <h3 id="_7-2-log-format"><a href="#_7-2-log-format" aria-hidden="true" class="header-anchor">#</a> 7.2 log_format</h3> <table><thead><tr><th>类型</th> <th>用法</th></tr></thead> <tbody><tr><td>语法</td> <td>log_format name [escape=default[json] string]</td></tr> <tr><td>默认</td> <td>log_format combined ...</td></tr> <tr><td>Context</td> <td>http</td></tr></tbody></table> <p>案例</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code> <span class="token keyword">log_format</span>  main  <span class="token string">'$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</span>
                      <span class="token string">'$status $body_bytes_sent &quot;$http_referer&quot; '</span>
                      <span class="token string">'&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'</span><span class="token punctuation">;</span>

 <span class="token keyword">log_format</span>  zxmf  <span class="token string">'$arg_name $http_referer sent_http_date&quot;'</span><span class="token punctuation">;</span>
 <span class="token keyword">access_log</span>  <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>access<span class="token punctuation">.</span>log  main<span class="token punctuation">;</span>

 <span class="token number">221.216</span><span class="token number">.143</span><span class="token number">.110</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">09</span><span class="token operator">/</span>Jun<span class="token operator">/</span><span class="token number">2018</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token number">41</span><span class="token punctuation">:</span><span class="token number">18</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET / HTTP/1.1&quot;</span> <span class="token number">200</span> <span class="token number">612</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36&quot;</span> <span class="token string">&quot;-&quot;</span>
</code></pre></div><h3 id="_7-3-http请求变量"><a href="#_7-3-http请求变量" aria-hidden="true" class="header-anchor">#</a> 7.3 HTTP请求变量</h3> <table><thead><tr><th>名称</th> <th>含义</th> <th>例子</th></tr></thead> <tbody><tr><td>arg_PARAMETER</td> <td>请求参数</td> <td>$arg_name</td></tr> <tr><td>http_HEADER</td> <td>请求头</td> <td>$http_referer</td></tr> <tr><td>sent_http_HEADER</td> <td>响应头</td> <td>sent_http_cookie</td></tr></tbody></table> <h3 id="_7-4-内置变量"><a href="#_7-4-内置变量" aria-hidden="true" class="header-anchor">#</a> 7.4 内置变量</h3> <p><a href="http://nginx.org/en/docs/http/ngx_http_log_module.html" target="_blank" rel="noopener noreferrer">ngx_http_log_module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="http://nginx.org/en/docs/http/ngx_http_log_module.html#log_format" target="_blank" rel="noopener noreferrer">log_format<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <table><thead><tr><th>名称</th> <th>含义</th></tr></thead> <tbody><tr><td>$remote_addr</td> <td>客户端地址</td></tr> <tr><td>$remote_user</td> <td>客户端用户名称</td></tr> <tr><td>$time_local</td> <td>访问时间和时区</td></tr> <tr><td>$request</td> <td>请求的URI和HTTP协议</td></tr> <tr><td>$http_host</td> <td>请求地址，即浏览器中你输入的地址（IP或域名）</td></tr> <tr><td>$status</td> <td>HTTP请求状态</td></tr> <tr><td>$body_bytes_sent</td> <td>发送给客户端文件内容大小</td></tr></tbody></table> <h2 id="_8-nginx实战"><a href="#_8-nginx实战" aria-hidden="true" class="header-anchor">#</a> 8. nginx实战</h2> <h3 id="_8-1-静态资源web服务"><a href="#_8-1-静态资源web服务" aria-hidden="true" class="header-anchor">#</a> 8.1 静态资源Web服务</h3> <ul><li>静态资源：一般客户端发送请求到web服务器，web服务器从内存在取到相应的文件，返回给客户端，客户端解析并渲染显示出来。</li> <li>动态资源：一般客户端请求的动态资源，先将请求交于web容器，web容器连接数据库，数据库处理数据之后，将内容交给web服务器，web服务器返回给客户端解析渲染处理。</li></ul> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>浏览器渲染</td> <td>HTML、CSS、JS</td></tr> <tr><td>图片</td> <td>JPEG、GIF、PNG</td></tr> <tr><td>视频</td> <td>FLV、MPEG</td></tr> <tr><td>下载文件</td> <td>Word、Excel</td></tr></tbody></table> <h3 id="_8-2-cdn"><a href="#_8-2-cdn" aria-hidden="true" class="header-anchor">#</a> 8.2 CDN</h3> <ul><li>CDN的全称是Content Delivery Network，即内容分发网络。</li> <li>CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。其目的是使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度。</li></ul> <p><img src="assets/cdn.jpg" alt="cdn"></p> <h4 id="_8-2-1-配置语法"><a href="#_8-2-1-配置语法" aria-hidden="true" class="header-anchor">#</a> 8.2.1 配置语法</h4> <h5 id="_8-2-1-1-sendfile"><a href="#_8-2-1-1-sendfile" aria-hidden="true" class="header-anchor">#</a> 8.2.1.1 sendfile</h5> <p>不经过用户内核发送文件</p> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>sendfile on / off</td></tr> <tr><td>默认</td> <td>sendfile off;</td></tr> <tr><td>上下文</td> <td>http,server,location,if in location</td></tr></tbody></table> <h5 id="_8-2-1-2-tcp-nopush"><a href="#_8-2-1-2-tcp-nopush" aria-hidden="true" class="header-anchor">#</a> 8.2.1.2 tcp_nopush</h5> <p>在sendfile开启的情况 下，提高网络包的传输效率</p> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>tcp_nopush on / off</td></tr> <tr><td>默认</td> <td>tcp_nopush off;</td></tr> <tr><td>上下文</td> <td>http,server,location</td></tr></tbody></table> <h5 id="_8-2-1-2-tcp-nodelay"><a href="#_8-2-1-2-tcp-nodelay" aria-hidden="true" class="header-anchor">#</a> 8.2.1.2 tcp_nodelay</h5> <p>在keepalive连接下，提高网络包的传输实时性</p> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>tcp_nodelay on / off</td></tr> <tr><td>默认</td> <td>tcp_nodelay on;</td></tr> <tr><td>上下文</td> <td>http,server,location</td></tr></tbody></table> <h5 id="_8-2-1-3-gzip"><a href="#_8-2-1-3-gzip" aria-hidden="true" class="header-anchor">#</a> 8.2.1.3 gzip</h5> <p>压缩文件可以节约带宽和提高网络传输效率</p> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>gzip on / off</td></tr> <tr><td>默认</td> <td>gzip off;</td></tr> <tr><td>上下文</td> <td>http,server,location</td></tr></tbody></table> <h5 id="_8-2-1-4-gzip-comp-level"><a href="#_8-2-1-4-gzip-comp-level" aria-hidden="true" class="header-anchor">#</a> 8.2.1.4 gzip_comp_level</h5> <p>压缩比率越高，文件被压缩的体积越小</p> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>gzip_comp_level level</td></tr> <tr><td>默认</td> <td>gzip_comp_level 1;</td></tr> <tr><td>上下文</td> <td>http,server,location</td></tr></tbody></table> <h5 id="_8-2-1-5-gzip-http-version"><a href="#_8-2-1-5-gzip-http-version" aria-hidden="true" class="header-anchor">#</a> 8.2.1.5 gzip_http_version</h5> <p>压缩HTTP版本</p> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>gzip_http_version 1.0/1.1</td></tr> <tr><td>默认</td> <td>gzip_http_version 1.1;</td></tr> <tr><td>上下文</td> <td>http,server,location</td></tr></tbody></table> <h5 id="_8-2-1-6-http-gzip-static-module"><a href="#_8-2-1-6-http-gzip-static-module" aria-hidden="true" class="header-anchor">#</a> 8.2.1.6 http_gzip-static_module</h5> <p>先找磁盘上找同名的<code>.gz</code>这个文件是否存在,节约CPU的压缩时间和性能损耗</p> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>gzip_static on/off</td></tr> <tr><td>默认</td> <td>gzip_static off;</td></tr> <tr><td>上下文</td> <td>http,server,location</td></tr></tbody></table> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">location</span> <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>jpg<span class="token operator">|</span>png<span class="token operator">|</span>gif<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
        <span class="token keyword">gzip</span> off<span class="token punctuation">;</span>
        <span class="token keyword">gzip_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
       <span class="token keyword">gzip_comp_level</span> <span class="token number">3</span><span class="token punctuation">;</span>
       <span class="token keyword">gzip_types</span> image<span class="token operator">/</span>jpeg image<span class="token operator">/</span>png image<span class="token operator">/</span>gif<span class="token punctuation">;</span>
        <span class="token keyword">root</span> <span class="token operator">/</span>data<span class="token operator">/</span>images<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">location</span> <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>html<span class="token operator">|</span>js<span class="token operator">|</span>css<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
        <span class="token keyword">gzip</span> on<span class="token punctuation">;</span>
        <span class="token keyword">gzip_min_length</span> <span class="token number">1</span>k<span class="token punctuation">;</span>
        <span class="token keyword">gzip_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
        <span class="token keyword">gzip_comp_level</span> <span class="token number">9</span><span class="token punctuation">;</span>
        <span class="token keyword">gzip_types</span>  text<span class="token operator">/</span>css application<span class="token operator">/</span>javascript<span class="token punctuation">;</span>
        <span class="token keyword">root</span> <span class="token operator">/</span>data<span class="token operator">/</span>html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">location</span> <span class="token operator">~</span> <span class="token operator">^</span><span class="token operator">/</span>download <span class="token punctuation">{</span>
        <span class="token keyword">gzip_static</span> on<span class="token punctuation">;</span>
        <span class="token keyword">tcp_nopush</span> on<span class="token punctuation">;</span>
        <span class="token keyword">root</span> <span class="token operator">/</span>data<span class="token operator">/</span>download<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-3-浏览器缓存"><a href="#_8-3-浏览器缓存" aria-hidden="true" class="header-anchor">#</a> 8.3 浏览器缓存</h3> <p>校验本地缓存是否过期</p> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>检验是否过期</td> <td>Expires、Cache-Control(max-age)</td></tr> <tr><td>Etag</td> <td>Etag</td></tr> <tr><td>Last-Modified</td> <td>Last-Modified</td></tr></tbody></table> <h4 id="_8-3-1-expires"><a href="#_8-3-1-expires" aria-hidden="true" class="header-anchor">#</a> 8.3.1 expires</h4> <p>添加Cache-Control、Expires头</p> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>expires time</td></tr> <tr><td>默认</td> <td>expires off;</td></tr> <tr><td>上下文</td> <td>http,server,location</td></tr></tbody></table> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">location</span> <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>jpg<span class="token operator">|</span>png<span class="token operator">|</span>gif<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
        <span class="token keyword">expires</span> <span class="token number">24</span>h<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-4-跨域"><a href="#_8-4-跨域" aria-hidden="true" class="header-anchor">#</a> 8.4 跨域</h3> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>add_header name value</td></tr> <tr><td>默认</td> <td>add_header --;</td></tr> <tr><td>上下文</td> <td>http,server,location</td></tr></tbody></table> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">location</span> <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span>json$ <span class="token punctuation">{</span>
        <span class="token keyword">add_header</span> Access<span class="token operator">-</span>Control<span class="token operator">-</span><span class="token keyword">Allow</span><span class="token operator">-</span>Origin <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">3000</span><span class="token punctuation">;</span>
        <span class="token keyword">add_header</span> Access<span class="token operator">-</span>Control<span class="token operator">-</span><span class="token keyword">Allow</span><span class="token operator">-</span>Methods GET<span class="token punctuation">,</span>POST<span class="token punctuation">,</span>PUT<span class="token punctuation">,</span>DELETE<span class="token punctuation">,</span>OPTIONS<span class="token punctuation">;</span>
        <span class="token keyword">root</span> <span class="token operator">/</span>data<span class="token operator">/</span>json<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://47.104.184.134/users.json'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_8-5-防盗链"><a href="#_8-5-防盗链" aria-hidden="true" class="header-anchor">#</a> 8.5 防盗链</h3> <ul><li>防止网站资源被盗用</li> <li>保证信息安全</li> <li>防止流量过量</li> <li>区别哪些请求是非正常的用户请求</li> <li>使用http_refer防盗链</li></ul> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>valid_referers none block server_names string...</td></tr> <tr><td>默认</td> <td>-</td></tr> <tr><td>上下文</td> <td>server,location</td></tr></tbody></table> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">location</span> <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>jpg<span class="token operator">|</span>png<span class="token operator">|</span>gif<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
        <span class="token keyword">expires</span> <span class="token number">1</span>h<span class="token punctuation">;</span>
        <span class="token keyword">gzip</span> off<span class="token punctuation">;</span>
        <span class="token keyword">gzip_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
        <span class="token keyword">gzip_comp_level</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token keyword">gzip_types</span> image<span class="token operator">/</span>jpeg image<span class="token operator">/</span>png image<span class="token operator">/</span>gif<span class="token punctuation">;</span>
        <span class="token keyword">valid_referers</span> none blocked <span class="token number">47.104</span><span class="token number">.184</span><span class="token number">.134</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$invalid_referer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token number">403</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">root</span> <span class="token operator">/</span>data<span class="token operator">/</span>images<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-6-代理服务"><a href="#_8-6-代理服务" aria-hidden="true" class="header-anchor">#</a> 8.6 代理服务</h3> <h4 id="_8-6-1-配置"><a href="#_8-6-1-配置" aria-hidden="true" class="header-anchor">#</a> 8.6.1 配置</h4> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>proxy_pass URL</td></tr> <tr><td>默认</td> <td>-</td></tr> <tr><td>上下文</td> <td>server,location</td></tr></tbody></table> <h4 id="_8-6-2-反向代理"><a href="#_8-6-2-反向代理" aria-hidden="true" class="header-anchor">#</a> 8.6.2 反向代理</h4> <p>反向代理的对象的服务端 <img src="assets/fanproxy.jpg" alt="fanproxy"></p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">resolver</span> <span class="token number">8.8</span><span class="token number">.8</span><span class="token number">.8</span><span class="token punctuation">;</span>
<span class="token keyword">location</span> <span class="token operator">~</span> <span class="token operator">^</span><span class="token operator">/</span>api <span class="token punctuation">{</span>
      <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_8-6-3-正向代理"><a href="#_8-6-3-正向代理" aria-hidden="true" class="header-anchor">#</a> 8.6.3 正向代理</h4> <p>正向代理的对象是客户端 <img src="assets/positiveproxy.jpg" alt="positiveproxy"></p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token variable">$http_host</span><span class="token variable">$request_uri</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-7-负载均衡"><a href="#_8-7-负载均衡" aria-hidden="true" class="header-anchor">#</a> 8.7 负载均衡</h3> <p><img src="assets/nginxbalance.jpg" alt="nginxbalance"></p> <ul><li>使用集群是网站解决高并发、海量数据问题的常用手段。</li> <li>当一台服务器的处理能力、存储空间不足时，不要企图去换更强大的服务器，对大型网站而言，不管多么强大的服务器，都满足不了网站持续增长的业务需求。</li> <li>这种情况下，更恰当的做法是增加一台服务器分担原有服务器的访问及存储压力。通过负载均衡调度服务器，将来自浏览器的访问请求分发到应用服务器集群中的任何一台服务器上，如果有更多的用户，就在集群中加入更多的应用服务器，使应用服务器的负载压力不再成为整个网站的瓶颈。</li></ul> <h4 id="_8-7-1-upstream"><a href="#_8-7-1-upstream" aria-hidden="true" class="header-anchor">#</a> 8.7.1 upstream</h4> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>语法</td> <td>upstream name {}</td></tr> <tr><td>默认</td> <td>-</td></tr> <tr><td>上下文</td> <td>http</td></tr></tbody></table> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">upstream</span> zxmf <span class="token punctuation">{</span>
  <span class="token keyword">ip_hash</span><span class="token punctuation">;</span>
  <span class="token keyword">server</span> localhost<span class="token punctuation">:</span><span class="token number">3000</span><span class="token punctuation">;</span>
  <span class="token keyword">server</span> localhost<span class="token punctuation">:</span><span class="token number">4000</span><span class="token punctuation">;</span>
  <span class="token keyword">server</span> localhost<span class="token punctuation">:</span><span class="token number">5000</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>zxmf<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="_8-7-2-后端服务器调试状态"><a href="#_8-7-2-后端服务器调试状态" aria-hidden="true" class="header-anchor">#</a> 8.7.2 后端服务器调试状态</h4> <table><thead><tr><th>状态</th> <th>描述</th></tr></thead> <tbody><tr><td>down</td> <td>不参与负载均衡</td></tr> <tr><td>backup</td> <td>备份的服务器</td></tr> <tr><td>max_fails</td> <td>允许请求失败的次数</td></tr> <tr><td>fail_timeout</td> <td>经过max_fails失败后，服务暂停的时间</td></tr> <tr><td>max_conns</td> <td>限制最大的接收的连接数</td></tr></tbody></table> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">upstream</span> zxmf <span class="token punctuation">{</span>
  <span class="token keyword">server</span> localhost<span class="token punctuation">:</span><span class="token number">3000</span> down<span class="token punctuation">;</span>
  <span class="token keyword">server</span> localhost<span class="token punctuation">:</span><span class="token number">4000</span> backup<span class="token punctuation">;</span>
  <span class="token keyword">server</span> localhost<span class="token punctuation">:</span><span class="token number">5000</span> max_fails<span class="token operator">=</span><span class="token number">1</span> fail_timeout<span class="token operator">=</span><span class="token number">10</span>s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_8-7-3-分配方式"><a href="#_8-7-3-分配方式" aria-hidden="true" class="header-anchor">#</a> 8.7.3 分配方式</h4> <table><thead><tr><th>类型</th> <th>种类</th></tr></thead> <tbody><tr><td>轮询（默认）</td> <td>每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。</td></tr> <tr><td>weight(加权轮询)</td> <td>指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。</td></tr> <tr><td>ip_hash</td> <td>每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。</td></tr> <tr><td>url_hash（第三方）</td> <td>按访问的URL地址来分配 请求，每个URL都定向到同一个后端 服务器上(缓存)</td></tr> <tr><td>fair（第三方）</td> <td>按后端服务器的响应时间来分配请求，响应时间短的优先分配。</td></tr> <tr><td>least_conn</td> <td>最小连接数，哪个连接少就分给谁</td></tr> <tr><td>自定义hash</td> <td>hash自定义key</td></tr></tbody></table> <h3 id="_8-8-缓存"><a href="#_8-8-缓存" aria-hidden="true" class="header-anchor">#</a> 8.8 缓存</h3> <p>nginx代理缓存</p> <p><a href="https://blog.csdn.net/dengjiexian123/article/details/53386586" target="_blank" rel="noopener noreferrer">proxy_cache<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">http</span><span class="token punctuation">{</span>
    <span class="token keyword">proxy_cache_path</span> <span class="token operator">/</span>data<span class="token operator">/</span>nginx<span class="token operator">/</span>tmp<span class="token operator">-</span>test levels<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">2</span> keys_zone<span class="token operator">=</span>tmp<span class="token operator">-</span>test<span class="token punctuation">:</span><span class="token number">100</span>m inactive<span class="token operator">=</span><span class="token number">7</span>d max_size<span class="token operator">=</span><span class="token number">1000</span>g<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>proxy_cache_path 缓存文件路径</p></li> <li><p>levels 设置缓存文件目录层次；levels=1:2 表示两级目录</p></li> <li><p>keys_zone 设置缓存名字和共享内存大小</p></li> <li><p>inactive 在指定时间内没人访问则被删除</p></li> <li><p>max_size 最大缓存空间，如果缓存空间满，默认覆盖掉缓存时间最长的资源。</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">location</span> <span class="token operator">/</span>tmp<span class="token operator">-</span>test<span class="token operator">/</span> <span class="token punctuation">{</span>
  <span class="token keyword">proxy_cache</span> tmp<span class="token operator">-</span>test<span class="token punctuation">;</span>
  <span class="token keyword">proxy_cache_valid</span>  <span class="token number">200</span> <span class="token number">206</span> <span class="token number">304</span> <span class="token number">301</span> <span class="token number">302</span> <span class="token number">10</span>d<span class="token punctuation">;</span>
  <span class="token keyword">proxy_cache_key</span> <span class="token variable">$uri</span><span class="token punctuation">;</span>
  <span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span><span class="token punctuation">:</span><span class="token variable">$server_port</span><span class="token punctuation">;</span>
  <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
  <span class="token keyword">proxy_set_header</span>   X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
  <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8081</span><span class="token operator">/</span>media_store<span class="token punctuation">.</span>php<span class="token operator">/</span>tmp<span class="token operator">-</span>test<span class="token operator">/</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>proxy_cache tmp-test 使用名为tmp-test的对应缓存配置</p></li> <li><p>proxy_cache_valid 200 206 304 301 302 10d; 对httpcode为200…的缓存10天</p></li> <li><p>proxy_cache_key $uri 定义缓存唯一key,通过唯一key来进行hash存取</p></li> <li><p>proxy_set_header 自定义http header头，用于发送给后端真实服务器。</p></li> <li><p>proxy_pass 指代理后转发的路径，注意是否需要最后的/</p></li></ul></div> <!----> <div class="content page-nav"><p class="inner"><!----> <span class="next"><a href="/fe/44.enzyme.html">
            React测试初体验
          </a> →
        </span></p></div> <div id="comment-container"><div class="gt-container"><div class="gt-initing"><i class="gt-loader"></i> <p class="gt-initing-text">Gitalking ...</p></div> <!----> <!----> <div><div class="gt-header"><a class="gt-avatar-github"><span class="gt-ico gt-ico-github"><span class="gt-svg"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M64 524C64 719.602 189.356 885.926 364.113 947.017 387.65799 953 384 936.115 384 924.767L384 847.107C248.118 863.007 242.674 773.052 233.5 758.001 215 726.501 171.5 718.501 184.5 703.501 215.5 687.501 247 707.501 283.5 761.501 309.956 800.642 361.366 794.075 387.658 787.497 393.403 763.997 405.637 743.042 422.353 726.638 281.774 701.609 223 615.67 223 513.5 223 464.053 239.322 418.406 271.465 381.627 251.142 320.928 273.421 269.19 276.337 261.415 334.458 256.131 394.888 302.993 399.549 306.685 432.663 297.835 470.341 293 512.5 293 554.924 293 592.81 297.896 626.075 306.853 637.426 298.219 693.46 258.054 747.5 262.966 750.382 270.652 772.185 321.292 753.058 381.083 785.516 417.956 802 463.809 802 513.5 802 615.874 742.99 701.953 601.803 726.786 625.381 750.003 640 782.295 640 818.008L640 930.653C640.752 939.626 640 948.664978 655.086 948.665 832.344 888.962 960 721.389 960 524 960 276.576 759.424 76 512 76 264.577 76 64 276.576 64 524Z"></path>
</svg>
</span> <!----></span></a> <div class="gt-header-comment"><textarea placeholder="Leave a comment" class="gt-header-textarea"></textarea> <div class="gt-header-preview markdown-body hide"></div> <div class="gt-header-controls"><a href="https://guides.github.com/features/mastering-markdown/" target="_blank" class="gt-header-controls-tip"><span class="gt-ico gt-ico-tip"><span class="gt-svg"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 366.949535c-16.065554 0-29.982212 13.405016-29.982212 29.879884l0 359.070251c0 16.167882 13.405016 29.879884 29.982212 29.879884 15.963226 0 29.879884-13.405016 29.879884-29.879884L541.879884 396.829419C541.879884 380.763865 528.474868 366.949535 512 366.949535L512 366.949535z"
    p-id="3083"></path>
  <path d="M482.017788 287.645048c0-7.776956 3.274508-15.553912 8.80024-21.181973 5.525732-5.525732 13.302688-8.80024 21.181973-8.80024 7.776956 0 15.553912 3.274508 21.079644 8.80024 5.525732 5.62806 8.80024 13.405016 8.80024 21.181973 0 7.776956-3.274508 15.656241-8.80024 21.181973-5.525732 5.525732-13.405016 8.697911-21.079644 8.697911-7.879285 0-15.656241-3.274508-21.181973-8.697911C485.292295 303.301289 482.017788 295.524333 482.017788 287.645048L482.017788 287.645048z"
    p-id="3084"></path>
  <path d="M512 946.844409c-239.8577 0-434.895573-195.037873-434.895573-434.895573 0-239.8577 195.037873-434.895573 434.895573-434.895573 239.755371 0 434.895573 195.037873 434.895573 434.895573C946.895573 751.806535 751.755371 946.844409 512 946.844409zM512 126.17088c-212.740682 0-385.880284 173.037274-385.880284 385.777955 0 212.740682 173.037274 385.777955 385.880284 385.777955 212.740682 0 385.777955-173.037274 385.777955-385.777955C897.777955 299.208154 724.740682 126.17088 512 126.17088z"
    p-id="3085"></path>
</svg>
</span> <span class="gt-ico-text">Markdown is supported</span></span></a> <!----> <button class="gt-btn gt-btn-preview"><span class="gt-btn-text">Preview</span> <!----></button> <button class="gt-btn gt-btn-login"><span class="gt-btn-text">Login with GitHub</span> <!----></button></div></div></div> <div class="gt-comments"><span></span> <p class="gt-comments-null">
                Be the first guy leaving a comment!
            </p> <!----></div></div></div></div></div></div> <!----></div> <div class="tool-group"><!----></div></div> <!----></div> <div class="background-mask" style="background:#f6f6f6;"></div></div></div>
    <script src="/assets/js/app.35b69267.js" defer></script><script src="/assets/js/95.7c55098e.js" defer></script>
  </body>
</html>
