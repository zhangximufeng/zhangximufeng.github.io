<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB简介 | Myfun&#39;s Blog</title>
    <meta name="description" content="MongoDB">
    <link rel="icon" href="/favicon.ico">
    <meta name="keywords" content="MongoDB">
    <link rel="preload" href="/assets/css/0.styles.6bc9bf16.css" as="style"><link rel="preload" href="/assets/js/app.35b69267.js" as="script"><link rel="preload" href="/assets/js/64.9384bc9a.js" as="script"><link rel="prefetch" href="/assets/js/10.a2f6c6ac.js"><link rel="prefetch" href="/assets/js/100.24b9a366.js"><link rel="prefetch" href="/assets/js/101.085f0585.js"><link rel="prefetch" href="/assets/js/102.66d5674f.js"><link rel="prefetch" href="/assets/js/103.7f71429c.js"><link rel="prefetch" href="/assets/js/104.13b0f535.js"><link rel="prefetch" href="/assets/js/105.0a093e85.js"><link rel="prefetch" href="/assets/js/106.a4a1db62.js"><link rel="prefetch" href="/assets/js/107.2634aacf.js"><link rel="prefetch" href="/assets/js/108.b393516d.js"><link rel="prefetch" href="/assets/js/109.769b78fb.js"><link rel="prefetch" href="/assets/js/11.fb483cc4.js"><link rel="prefetch" href="/assets/js/12.24a41994.js"><link rel="prefetch" href="/assets/js/13.a4762474.js"><link rel="prefetch" href="/assets/js/14.4a737bc9.js"><link rel="prefetch" href="/assets/js/15.548f4e99.js"><link rel="prefetch" href="/assets/js/16.b0d2654c.js"><link rel="prefetch" href="/assets/js/17.d43ab467.js"><link rel="prefetch" href="/assets/js/18.0c8f5f87.js"><link rel="prefetch" href="/assets/js/19.19ef59f8.js"><link rel="prefetch" href="/assets/js/2.436a35aa.js"><link rel="prefetch" href="/assets/js/20.24296203.js"><link rel="prefetch" href="/assets/js/21.c486888f.js"><link rel="prefetch" href="/assets/js/22.7e2305f9.js"><link rel="prefetch" href="/assets/js/23.e55bab1b.js"><link rel="prefetch" href="/assets/js/24.1468433c.js"><link rel="prefetch" href="/assets/js/25.6d82837f.js"><link rel="prefetch" href="/assets/js/26.3c4b2f18.js"><link rel="prefetch" href="/assets/js/27.21725a4f.js"><link rel="prefetch" href="/assets/js/28.db16c479.js"><link rel="prefetch" href="/assets/js/29.cb9512e5.js"><link rel="prefetch" href="/assets/js/3.5c82c0f7.js"><link rel="prefetch" href="/assets/js/30.a4c25096.js"><link rel="prefetch" href="/assets/js/31.81741530.js"><link rel="prefetch" href="/assets/js/32.da6d2ac6.js"><link rel="prefetch" href="/assets/js/33.f6164ecd.js"><link rel="prefetch" href="/assets/js/34.0344ad22.js"><link rel="prefetch" href="/assets/js/35.07d4c8d3.js"><link rel="prefetch" href="/assets/js/36.2c6adcff.js"><link rel="prefetch" href="/assets/js/37.ceb5e95e.js"><link rel="prefetch" href="/assets/js/38.d39e96e5.js"><link rel="prefetch" href="/assets/js/39.fcf34164.js"><link rel="prefetch" href="/assets/js/4.267db630.js"><link rel="prefetch" href="/assets/js/40.bdf31768.js"><link rel="prefetch" href="/assets/js/41.cc61eccd.js"><link rel="prefetch" href="/assets/js/42.042e4349.js"><link rel="prefetch" href="/assets/js/43.b385d348.js"><link rel="prefetch" href="/assets/js/44.7669f3e2.js"><link rel="prefetch" href="/assets/js/45.2fb532f4.js"><link rel="prefetch" href="/assets/js/46.0cc86442.js"><link rel="prefetch" href="/assets/js/47.30448b83.js"><link rel="prefetch" href="/assets/js/48.8893a5ed.js"><link rel="prefetch" href="/assets/js/49.ed7be1ae.js"><link rel="prefetch" href="/assets/js/5.d8a5933e.js"><link rel="prefetch" href="/assets/js/50.e4af394b.js"><link rel="prefetch" href="/assets/js/51.502ca2a7.js"><link rel="prefetch" href="/assets/js/52.f9768ea6.js"><link rel="prefetch" href="/assets/js/53.0c762369.js"><link rel="prefetch" href="/assets/js/54.dad23d00.js"><link rel="prefetch" href="/assets/js/55.4298d6a4.js"><link rel="prefetch" href="/assets/js/56.d8505fa7.js"><link rel="prefetch" href="/assets/js/57.63d197ce.js"><link rel="prefetch" href="/assets/js/58.ae9a3671.js"><link rel="prefetch" href="/assets/js/59.cb04d7cd.js"><link rel="prefetch" href="/assets/js/6.a83fef9a.js"><link rel="prefetch" href="/assets/js/60.0cedb385.js"><link rel="prefetch" href="/assets/js/61.a5c3f820.js"><link rel="prefetch" href="/assets/js/62.fc2d969d.js"><link rel="prefetch" href="/assets/js/63.53f087e3.js"><link rel="prefetch" href="/assets/js/65.bb5db767.js"><link rel="prefetch" href="/assets/js/66.86940f42.js"><link rel="prefetch" href="/assets/js/67.37215862.js"><link rel="prefetch" href="/assets/js/68.e0c14875.js"><link rel="prefetch" href="/assets/js/69.276f0d65.js"><link rel="prefetch" href="/assets/js/7.7e7cde5e.js"><link rel="prefetch" href="/assets/js/70.0fb38ae4.js"><link rel="prefetch" href="/assets/js/71.7c824b27.js"><link rel="prefetch" href="/assets/js/72.bc39810c.js"><link rel="prefetch" href="/assets/js/73.9917d9a4.js"><link rel="prefetch" href="/assets/js/74.7912f7da.js"><link rel="prefetch" href="/assets/js/75.c193b7ec.js"><link rel="prefetch" href="/assets/js/76.ecd4e536.js"><link rel="prefetch" href="/assets/js/77.842c5aba.js"><link rel="prefetch" href="/assets/js/78.0a67366d.js"><link rel="prefetch" href="/assets/js/79.324df7d4.js"><link rel="prefetch" href="/assets/js/8.7063c274.js"><link rel="prefetch" href="/assets/js/80.68c6326b.js"><link rel="prefetch" href="/assets/js/81.a7df7b21.js"><link rel="prefetch" href="/assets/js/82.abd9c0c2.js"><link rel="prefetch" href="/assets/js/83.fd0d8457.js"><link rel="prefetch" href="/assets/js/84.148b432c.js"><link rel="prefetch" href="/assets/js/85.32148693.js"><link rel="prefetch" href="/assets/js/86.7dc5fe11.js"><link rel="prefetch" href="/assets/js/87.bd1be392.js"><link rel="prefetch" href="/assets/js/88.2c0b86aa.js"><link rel="prefetch" href="/assets/js/89.3038cc8d.js"><link rel="prefetch" href="/assets/js/9.5cab2997.js"><link rel="prefetch" href="/assets/js/90.fb4057a1.js"><link rel="prefetch" href="/assets/js/91.4aa5adaf.js"><link rel="prefetch" href="/assets/js/92.aea0a62e.js"><link rel="prefetch" href="/assets/js/93.e2d0e9a7.js"><link rel="prefetch" href="/assets/js/94.a9e33a20.js"><link rel="prefetch" href="/assets/js/95.7c55098e.js"><link rel="prefetch" href="/assets/js/96.c8dfe1c0.js"><link rel="prefetch" href="/assets/js/97.35fc7df3.js"><link rel="prefetch" href="/assets/js/98.551b3ede.js"><link rel="prefetch" href="/assets/js/99.a8f5ffc4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6bc9bf16.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="wrap"><div class="theme-container container no-sidebar"><header class="navbar"><div class="nav-header"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" class="logo"> <span class="site-name can-hide">
        Myfun's Blog
      </span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/interview/" class="nav-link">InterviewMap</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/css_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">CSS_Tricks</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/js_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">JS_Tricks</a></div><div class="nav-item"><a href="/tags/" class="nav-link">Tags</a></div><div class="nav-item"><a href="https://github.com/zhangximufeng" target="_blank" rel="noopener noreferrer" class="nav-link">Github</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/animate_resume_ts/" target="_blank" rel="noopener noreferrer" class="nav-link">About</a></div> <!----></nav> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/interview/" class="nav-link">InterviewMap</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/css_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">CSS_Tricks</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/js_tricks/" target="_blank" rel="noopener noreferrer" class="nav-link">JS_Tricks</a></div><div class="nav-item"><a href="/tags/" class="nav-link">Tags</a></div><div class="nav-item"><a href="https://github.com/zhangximufeng" target="_blank" rel="noopener noreferrer" class="nav-link">Github</a></div><div class="nav-item"><a href="https://zhangximufeng.github.io/animate_resume_ts/" target="_blank" rel="noopener noreferrer" class="nav-link">About</a></div> <!----></nav> <!----></div> <div class="page-container"><div><div class="page card"><div class="content-header"><!----> <span class="page-timestamp">2018-09-29</span></div> <div class="content"><p></p><div class="table-of-contents"><ul><li><a href="#mongodb简介">MongoDB简介</a><ul><li><a href="#_2-mongoose是什么？-t12-mongoose是什么？">2\. Mongoose是什么？ #</a></li><li><a href="#_3-使用-mongoose-t23-使用-mongoose">3\. 使用 mongoose #</a></li></ul></li></ul></div><p></p> <h1 id="mongodb简介"><a href="#mongodb简介" aria-hidden="true" class="header-anchor">#</a> MongoDB简介</h1> <hr> <ul><li>Mongodb是一个开源的NoSQL数据库，相比MySQL那样的关系型数据库，它更显得 轻巧、灵活，非常适合在数据规模很大、事和性不强的场合下使用。</li> <li>同时它也是一个对象数据库，没有表和行的概念，也没有固定的模式和结构，所有的数据都是以文档的形式存存储(文档，就是一个关联数组式的对象，它的内部由属性组成，一个属性对应的值可能是一个数、字符串、日期、数组、甚至是一个嵌套文档)，数据格式就是JSON。</li></ul> <h2 id="_2-mongoose是什么？-t12-mongoose是什么？"><a href="#_2-mongoose是什么？-t12-mongoose是什么？" aria-hidden="true" class="header-anchor">#</a> 2. Mongoose是什么？ [#](#t12. Mongoose是什么？)</h2> <ul><li>Mongoose是MongoDB的一个对象模型工具</li> <li>同时它也是针对MongoDB操作的一个对象模型库,封装了MongoDB对文档的的一些增删改查等常用方法</li> <li>让NodeJS操作Mongodb数据库变得更加灵活简单</li> <li>Mongoose因为封装了MongoDB对文档操作的常用方法，可以高效处理mongodb,还提供了类似Schema的功能，如hook、plugin、virtual、populate等机制。</li> <li>官网 <a href="http://mongoosejs.com/" target="_blank" rel="noopener noreferrer">mongoosejs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="_3-使用-mongoose-t23-使用-mongoose"><a href="#_3-使用-mongoose-t23-使用-mongoose" aria-hidden="true" class="header-anchor">#</a> 3. 使用 mongoose [#](#t23. 使用 mongoose)</h2> <h3 id="_3-1-安装mongoose-t33-1-安装mongoose"><a href="#_3-1-安装mongoose-t33-1-安装mongoose" aria-hidden="true" class="header-anchor">#</a> 3.1 安装mongoose [#](#t33.1 安装mongoose)</h3> <pre><code>$ npm install mongoose
</code></pre> <h3 id="_3-2-使用mongoose-t43-2-使用mongoose"><a href="#_3-2-使用mongoose-t43-2-使用mongoose" aria-hidden="true" class="header-anchor">#</a> 3.2 使用mongoose [#](#t43.2 使用mongoose)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongoose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> db <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://user:pass@ip:port/database&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>user 用户名</li> <li>pass 密码</li> <li>ip IP地址</li> <li>port 端口号</li> <li>database 数据库</li></ul> <h3 id="_3-3-使用mongoose-t53-3-使用mongoose"><a href="#_3-3-使用mongoose-t53-3-使用mongoose" aria-hidden="true" class="header-anchor">#</a> 3.3 使用mongoose [#](#t53.3 使用mongoose)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> connection <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1/zxmf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'数据库连接失败: '</span> <span class="token operator">+</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'数据库连接成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-4-schema-t63-4-schema"><a href="#_3-4-schema-t63-4-schema" aria-hidden="true" class="header-anchor">#</a> 3.4 Schema [#](#t63.4 Schema)</h3> <p>Schema是数据库集合的模型骨架 定义了集合中的字段的名称和类型以及默认值等信息</p> <h4 id="_3-4-1-schema-type-t73-4-1-schema-type"><a href="#_3-4-1-schema-type-t73-4-1-schema-type" aria-hidden="true" class="header-anchor">#</a> 3.4.1 Schema.Type [#](#t73.4.1 Schema.Type)</h4> <p>NodeJS中的基本数据类型都属于 Schema.Type 另外Mongoose还定义了自己的类型 基本属性类型有:</p> <ul><li>字符串(String)</li> <li>日期型(Date)</li> <li>数值型(Number)</li> <li>布尔型(Boolean)</li> <li>null</li> <li>数组([])</li> <li>内嵌文档</li></ul> <h4 id="_3-4-2-定义schema-t83-4-2-定义schema"><a href="#_3-4-2-定义schema-t83-4-2-定义schema" aria-hidden="true" class="header-anchor">#</a> 3.4.2 定义Schema [#](#t83.4.2 定义Schema)</h4> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">var</span> personSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token punctuation">:</span>String<span class="token punctuation">,</span> <span class="token comment">//姓名</span>
      binary<span class="token punctuation">:</span>Buffer<span class="token punctuation">,</span><span class="token comment">//二进制</span>
      living<span class="token punctuation">:</span>Boolean<span class="token punctuation">,</span><span class="token comment">//是否活着</span>
      birthday<span class="token punctuation">:</span>Date<span class="token punctuation">,</span><span class="token comment">//生日</span>
      age<span class="token punctuation">:</span>Number<span class="token punctuation">,</span><span class="token comment">//年龄</span>
      _id<span class="token punctuation">:</span>Schema<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>ObjectId<span class="token punctuation">,</span>  <span class="token comment">//主键</span>
      _fk<span class="token punctuation">:</span>Schema<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>ObjectId<span class="token punctuation">,</span>  <span class="token comment">//外键</span>
      array<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//数组</span>
      arrOfString<span class="token punctuation">:</span><span class="token punctuation">[</span>String<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//字符串数组</span>
      arrOfNumber<span class="token punctuation">:</span><span class="token punctuation">[</span>Number<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//数字数组</span>
      arrOfDate<span class="token punctuation">:</span><span class="token punctuation">[</span>Date<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//日期数组</span>
      arrOfBuffer<span class="token punctuation">:</span><span class="token punctuation">[</span>Buffer<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//Buffer数组</span>
      arrOfBoolean<span class="token punctuation">:</span><span class="token punctuation">[</span>Boolean<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//布尔值数组</span>
      arrOfObjectId<span class="token punctuation">:</span><span class="token punctuation">[</span>Schema<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>ObjectId<span class="token punctuation">]</span><span class="token comment">//对象ID数组</span>
      nested<span class="token punctuation">:</span><span class="token punctuation">{</span> <span class="token comment">//内嵌文档</span>
        name<span class="token punctuation">:</span>String<span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>name<span class="token operator">=</span> <span class="token string">'zxmf'</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>birthday <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>married <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>mixed<span class="token operator">=</span> <span class="token punctuation">{</span>any<span class="token punctuation">:</span><span class="token punctuation">{</span>other<span class="token punctuation">:</span><span class="token string">'other'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>_otherId <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>ObjectId</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>hobby<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'smoking'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>ofString<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>ofNumber<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>ofDates<span class="token punctuation">.</span><span class="token function">addToSet</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>ofBuffer<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>ofMixed <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'anything'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">'zxmf'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>nested<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'zxmf'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-4-3-model-t93-4-3-model"><a href="#_3-4-3-model-t93-4-3-model" aria-hidden="true" class="header-anchor">#</a> 3.4.3 Model [#](#t93.4.3 Model)</h4> <p>Model是由通过Schema构造而成 除了具有Schema定义的数据库骨架以外，还可以操作数据库 如何通过Schema来创建Model呢，如下:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//连接数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://123.57.143.189:27017/zxmf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//两个参数表示定义一个模型</span>
<span class="token keyword">var</span> PersonModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;Person&quot;</span><span class="token punctuation">,</span> PersonSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果该Model已经定义，则可以直接通过名字获取</span>
<span class="token keyword">var</span> PersonModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//一个参数表示获取已定义的模型</span>
</code></pre></div><p>拥有了Model，我们也就拥有了操作数据库的能力 在数据库中的集合名称等于 模型名转小写再转复数,比如</p> <blockquote><p>Person&gt;person&gt;people,Child&gt;child&gt;children</p></blockquote> <h4 id="_3-4-4-entity简述-t103-4-4-entity简述"><a href="#_3-4-4-entity简述-t103-4-4-entity简述" aria-hidden="true" class="header-anchor">#</a> 3.4.4 Entity简述 [#](#t103.4.4 Entity简述)</h4> <p>通过Model创建的实体，它也可以操作数据库 使用Model创建Entity，如下示例：</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">var</span> personEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersonModel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     name <span class="token punctuation">:</span> <span class="token string">&quot;zxmf&quot;</span><span class="token punctuation">,</span>
     age  <span class="token punctuation">:</span> <span class="token number">6</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>Schema生成Model，Model创造Entity，Model和Entity都可对数据库操作,但Model比Entity可以实现的功能更多</p></blockquote> <h4 id="_3-4-5-保存entity-t113-4-5-保存entity"><a href="#_3-4-5-保存entity-t113-4-5-保存entity" aria-hidden="true" class="header-anchor">#</a> 3.4.5 保存Entity [#](#t113.4.5 保存Entity)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongoose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1:27017/zxmf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> PersonSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> String<span class="token punctuation">}</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> Number<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> PersonModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;Person&quot;</span><span class="token punctuation">,</span> PersonSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> PersonEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersonModel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;zxmf&quot;</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token number">6</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

PersonEntity<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">,</span> doc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error :&quot;</span> <span class="token operator">+</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
       <span class="token comment">//doc是返回刚存的person对象</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-4-6-objectid-t123-4-6-objectid"><a href="#_3-4-6-objectid-t123-4-6-objectid" aria-hidden="true" class="header-anchor">#</a> 3.4.6 ObjectId [#](#t123.4.6 ObjectId)</h4> <p>存储在mongodb集合中的每个文档都有一个默认的主键_id 这个主键名称是固定的，它可以是mongodb支持的任何数据类型，默认是ObjectId 该类型的值由系统自己生成，从某种意义上几乎不会重复 ObjectId是一个12字节的 BSON 类型字符串。按照字节顺序，依次代表：</p> <ul><li><p>4字节：UNIX时间戳</p></li> <li><p>3字节：表示运行MongoDB的机器</p></li> <li><p>2字节：表示生成此_id的进程</p></li> <li><p>3字节：由一个随机数开始的计数器生成的值</p> <blockquote><p>每一个文档都有一个特殊的键_id，这个键在文档所属的集合中是唯一的。</p></blockquote></li></ul> <h3 id="_3-5-基础操作-t133-5-基础操作"><a href="#_3-5-基础操作-t133-5-基础操作" aria-hidden="true" class="header-anchor">#</a> 3.5 基础操作 [#](#t133.5 基础操作)</h3> <h4 id="_3-5-1-查询-t143-5-1-查询"><a href="#_3-5-1-查询-t143-5-1-查询" aria-hidden="true" class="header-anchor">#</a> 3.5.1 查询 [#](#t143.5.1 查询)</h4> <p>语法</p> <pre><code>Model.find(查询条件,callback);
</code></pre> <p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//若没有向find传递参数，默认的是显示所有文档</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">,</span> docs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error :&quot;</span> <span class="token operator">+</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//docs: age为6的所有文档</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-5-2-model保存-t153-5-2-model保存"><a href="#_3-5-2-model保存-t153-5-2-model保存" aria-hidden="true" class="header-anchor">#</a> 3.5.2 Model保存 [#](#t153.5.2 Model保存)</h4> <p>语法</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>文档数据<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code> PersonModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>doc<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
`
</code></pre></div><h4 id="_3-5-3-entity保存-t163-5-3-entity保存"><a href="#_3-5-3-entity保存-t163-5-3-entity保存" aria-hidden="true" class="header-anchor">#</a> 3.5.3 Entity保存 [#](#t163.5.3 Entity保存)</h4> <p>语法</p> <div class="language-js extra-class"><pre class="language-js"><code>Entity<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> PersonEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersonModel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&quot;zxmf&quot;</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

PersonEntity<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>doc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-5-4-更新-t173-5-4-更新"><a href="#_3-5-4-更新-t173-5-4-更新" aria-hidden="true" class="header-anchor">#</a> 3.5.4 更新 [#](#t173.5.4 更新)</h4> <p>语法</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>查询条件<span class="token punctuation">,</span>更新对象<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> conditions <span class="token operator">=</span> <span class="token punctuation">{</span>name <span class="token punctuation">:</span> <span class="token string">'zxmf'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> update <span class="token operator">=</span> <span class="token punctuation">{</span>$<span class="token keyword">set</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> age <span class="token punctuation">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  PersonModel<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>conditions<span class="token punctuation">,</span> update<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Update success!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>请注意如果匹配到多条记录，默认只更新一条，如果要更新匹配到的所有记录的话需要加一个参数 {multi:true}</p> <h4 id="_3-5-5-删除-t183-5-5-删除"><a href="#_3-5-5-删除-t183-5-5-删除" aria-hidden="true" class="header-anchor">#</a> 3.5.5 删除 [#](#t183.5.5 删除)</h4> <p>语法</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>查询条件<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> conditions <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'zxmf'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
PersonModel<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>conditions<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Delete success!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-5-6-基本查询-t193-5-6-基本查询"><a href="#_3-5-6-基本查询-t193-5-6-基本查询" aria-hidden="true" class="header-anchor">#</a> 3.5.6 基本查询 [#](#t193.5.6 基本查询)</h4> <h5 id="_3-5-6-1-准备数据-t203-5-6-1-准备数据"><a href="#_3-5-6-1-准备数据-t203-5-6-1-准备数据" aria-hidden="true" class="header-anchor">#</a> 3.5.6.1 准备数据 [#](#t203.5.6.1  准备数据)</h5> <div class="language-js extra-class"><pre class="language-js"><code>        PersonModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                          <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf1&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf2&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf3&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf4&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf5&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf6&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf7&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf8&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf9&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">&quot;zxmf10&quot;</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token number">10</span> <span class="token punctuation">}</span>
                         <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'save ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_3-5-6-2-属性过滤-t213-5-6-2-属性过滤"><a href="#_3-5-6-2-属性过滤-t213-5-6-2-属性过滤" aria-hidden="true" class="header-anchor">#</a> 3.5.6.2 属性过滤 [#](#t213.5.6.2  属性过滤)</h5> <p>语法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">find</span><span class="token punctuation">(</span>Conditions<span class="token punctuation">,</span>field<span class="token punctuation">,</span>callback<span class="token punctuation">)</span>
</code></pre></div><p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//field省略或为Null，则返回所有属性。</span>
<span class="token comment">//返回只包含name、age两个键的所有记录</span>
Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> _id<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span>，<span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//docs 查询结果集</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>我们只需要把显示的属性设置为大于零的数就可以，当然1是最好理解的，_id是默认返回，如果不要显示加上(&quot;_id&quot;:0)</p> <h5 id="_3-5-6-3-findone-查询单条-t223-5-6-3-findone-查询单条"><a href="#_3-5-6-3-findone-查询单条-t223-5-6-3-findone-查询单条" aria-hidden="true" class="header-anchor">#</a> 3.5.6.3 findOne(查询单条) [#](#t223.5.6.3  findOne(查询单条))</h5> <p>与find相同，但只返回单个文档，也就说当查询到即一个符合条件的数据时，将停止继续查询，并返回查询结果 语法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">findOne</span><span class="token punctuation">(</span>Conditions<span class="token punctuation">,</span>callback<span class="token punctuation">)</span>
</code></pre></div><p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code>TestModel<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> age<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">// 查询符合age等于6的第一条数据</span>
       <span class="token comment">// doc是查询结果</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_3-5-6-4-findbyid-按id单条数据-t233-5-6-4-findbyid-按id单条数据"><a href="#_3-5-6-4-findbyid-按id单条数据-t233-5-6-4-findbyid-按id单条数据" aria-hidden="true" class="header-anchor">#</a> 3.5.6.4 findById(按ID单条数据) [#](#t233.5.6.4  findById(按ID单条数据))</h5> <p>与findOne相同，但它只接收文档的_id作为参数，返回单个文档 语法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">findById</span><span class="token punctuation">(</span>_id<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre></div><p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code>PersonModel<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>_id<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">//doc 查询结果文档</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_3-5-6-5-gt、-lt-大于、小于-t243-5-6-5-gt、-lt-大于、小于"><a href="#_3-5-6-5-gt、-lt-大于、小于-t243-5-6-5-gt、-lt-大于、小于" aria-hidden="true" class="header-anchor">#</a> 3.5.6.5 $gt、$lt(大于、小于) [#](#t243.5.6.5  $gt、$lt(大于、小于))</h5> <p>查询时我们经常会碰到要根据某些字段进行条件筛选查询，比如说Number类型，怎么办呢，我们就可以使用$gt(&gt;)、$lt(&lt;)、$lte(&lt;=)、$gte(&gt;=)操作符进行排除性的查询，如下示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">&quot;$gt&quot;</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//查询所有nage大于6的数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">&quot;$lt&quot;</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//查询所有nage小于6的数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">&quot;$gt&quot;</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">&quot;$lt&quot;</span><span class="token punctuation">:</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//查询所有nage大于6小于9的数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_3-5-6-6-ne-不等于"><a href="#_3-5-6-6-ne-不等于" aria-hidden="true" class="header-anchor">#</a> 3.5.6.6 $ne(不等于)</h5> <p>$ne(!=)操作符的含义相当于不等于、不包含，查询时我们可通过它进行条件判定，具体使用方法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> age<span class="token punctuation">:</span><span class="token punctuation">{</span> $ne<span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//查询age不等于6的所有数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_3-5-6-7-in-包含"><a href="#_3-5-6-7-in-包含" aria-hidden="true" class="header-anchor">#</a> 3.5.6.7 $in(包含)</h5> <p>和$ne操作符相反，$in相当于包含、等于，查询时查找包含于指定字段条件的数据</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> age<span class="token punctuation">:</span><span class="token punctuation">{</span> $<span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//查询age等于6的所有数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> age<span class="token punctuation">:</span><span class="token punctuation">{</span>$<span class="token keyword">in</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//可以把多个值组织成一个数组</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_3-5-6-8-or-或者"><a href="#_3-5-6-8-or-或者" aria-hidden="true" class="header-anchor">#</a> 3.5.6.8 $or(或者)</h5> <p>可以查询多个键值的任意给定值，只要满足其中一个就可返回，用于存在多个条件判定的情况下使用，如下示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;$or&quot;</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;zxmf&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//查询name为zxmf或age为6的全部文档</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_3-5-6-9-exists-是否存在"><a href="#_3-5-6-9-exists-是否存在" aria-hidden="true" class="header-anchor">#</a> 3.5.6.9 $exists(是否存在)</h5> <p>$exists操作符，可用于判断某些关键字段是否存在来进行条件查询。如下示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token punctuation">{</span>$exists<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//查询所有存在name属性的文档</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>email<span class="token punctuation">:</span> <span class="token punctuation">{</span>$exists<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//查询所有不存在email属性的文档</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-5-7-高级查询"><a href="#_3-5-7-高级查询" aria-hidden="true" class="header-anchor">#</a> 3.5.7 高级查询</h4> <p>可以限制结果的数量,跳过部分结果,根据任意键对结果进行各种排序</p> <p>所有这些选项都要在查询被发送到服务器之前指定</p> <h5 id="_3-5-7-1-limit-限制数量"><a href="#_3-5-7-1-limit-限制数量" aria-hidden="true" class="header-anchor">#</a> 3.5.7.1 limit(限制数量)</h5> <p>在查询操作中,有时数据量会很大,这时我们就需要对返回结果的数量进行限制 那么我们就可以使用limit函数，通过它来限制结果数量。 语法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">find</span><span class="token punctuation">(</span>Conditions<span class="token punctuation">,</span>fields<span class="token punctuation">,</span>options<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">{</span>limit<span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果匹配的结果不到20个，则返回匹配数量的结果，也就是说limit函数指定的是上限而非下限</p> <h5 id="_3-5-7-2-skip-跳过-略过的数量"><a href="#_3-5-7-2-skip-跳过-略过的数量" aria-hidden="true" class="header-anchor">#</a> 3.5.7.2 skip(跳过/略过的数量)</h5> <p>skip函数的功能是略过指定数量的匹配结果，返回余下的查询结果 如下示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">find</span><span class="token punctuation">(</span>Conditions<span class="token punctuation">,</span>fields<span class="token punctuation">,</span>options<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code>Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">{</span>skip<span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果查询结果数量中少于4个的话，则不会返回任何结果。</p> <h5 id="_3-5-7-3-sort函数-t323-5-7-3-sort函数"><a href="#_3-5-7-3-sort函数-t323-5-7-3-sort函数" aria-hidden="true" class="header-anchor">#</a> 3.5.7.3 sort函数 [#](#t323.5.7.3 sort函数)</h5> <p>sort函数可以将查询结果数据进行排序操作 该函数的参数是一个或多个键/值对 键代表要排序的键名,值代表排序的方向,1是升序,-1是降序 语法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">find</span><span class="token punctuation">(</span>Conditions<span class="token punctuation">,</span>fields<span class="token punctuation">,</span>options<span class="token punctuation">,</span>callback<span class="token punctuation">)</span>
</code></pre></div><p>代码</p> <div class="language-js extra-class"><pre class="language-js"><code> Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">{</span>sort<span class="token punctuation">:</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//查询所有数据，并按照age降序顺序返回数据docs</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>sort函数可根据用户自定义条件有选择性的来进行排序显示数据结果。</p> <h5 id="_3-5-7-4-分页查询-t333-5-7-4-分页查询"><a href="#_3-5-7-4-分页查询-t333-5-7-4-分页查询" aria-hidden="true" class="header-anchor">#</a> 3.5.7.4 分页查询 [#](#t333.5.7.4 分页查询)</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span>createAt<span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pageNum<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>pageSize<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>docs<span class="token punctuation">)</span><span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_3-5-7-5-populate-t343-5-7-5-populate"><a href="#_3-5-7-5-populate-t343-5-7-5-populate" aria-hidden="true" class="header-anchor">#</a> 3.5.7.5 populate [#](#t343.5.7.5 populate)</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//连接数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://localhost:27017/201606blog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定义课程Schema</span>
<span class="token keyword">var</span> CourseSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span>String
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> CourseModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Course'</span><span class="token punctuation">,</span>CourseSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> PersonSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span>String<span class="token punctuation">,</span>
        required<span class="token punctuation">:</span><span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 外键 别的集合的主键</span>
    course<span class="token punctuation">:</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span>mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>ObjectId<span class="token punctuation">,</span>
        ref<span class="token punctuation">:</span><span class="token string">'Course'</span> <span class="token comment">//指明此外键是哪个集合中的外键</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> PersonModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span>PersonSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
CourseModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">'node.js'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>course<span class="token punctuation">)</span><span class="token punctuation">{</span>
    PersonModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">'zxmf'</span><span class="token punctuation">,</span>course<span class="token punctuation">:</span>course<span class="token punctuation">.</span>_id<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>doc<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        PersonModel<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>_id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span><span class="token string">'course'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>doc<span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <!----> <div class="content page-nav"><p class="inner"><span class="prev">
          ← <a href="/fe/29.mongodb-4.html" class="prev">
            主从复制
          </a></span> <span class="next"><a href="/fe/29.mongodb-6.html">
            扩展mongoose模型
          </a> →
        </span></p></div> <div id="comment-container"><div class="gt-container"><div class="gt-initing"><i class="gt-loader"></i> <p class="gt-initing-text">Gitalking ...</p></div> <!----> <!----> <div><div class="gt-header"><a class="gt-avatar-github"><span class="gt-ico gt-ico-github"><span class="gt-svg"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M64 524C64 719.602 189.356 885.926 364.113 947.017 387.65799 953 384 936.115 384 924.767L384 847.107C248.118 863.007 242.674 773.052 233.5 758.001 215 726.501 171.5 718.501 184.5 703.501 215.5 687.501 247 707.501 283.5 761.501 309.956 800.642 361.366 794.075 387.658 787.497 393.403 763.997 405.637 743.042 422.353 726.638 281.774 701.609 223 615.67 223 513.5 223 464.053 239.322 418.406 271.465 381.627 251.142 320.928 273.421 269.19 276.337 261.415 334.458 256.131 394.888 302.993 399.549 306.685 432.663 297.835 470.341 293 512.5 293 554.924 293 592.81 297.896 626.075 306.853 637.426 298.219 693.46 258.054 747.5 262.966 750.382 270.652 772.185 321.292 753.058 381.083 785.516 417.956 802 463.809 802 513.5 802 615.874 742.99 701.953 601.803 726.786 625.381 750.003 640 782.295 640 818.008L640 930.653C640.752 939.626 640 948.664978 655.086 948.665 832.344 888.962 960 721.389 960 524 960 276.576 759.424 76 512 76 264.577 76 64 276.576 64 524Z"></path>
</svg>
</span> <!----></span></a> <div class="gt-header-comment"><textarea placeholder="Leave a comment" class="gt-header-textarea"></textarea> <div class="gt-header-preview markdown-body hide"></div> <div class="gt-header-controls"><a href="https://guides.github.com/features/mastering-markdown/" target="_blank" class="gt-header-controls-tip"><span class="gt-ico gt-ico-tip"><span class="gt-svg"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 366.949535c-16.065554 0-29.982212 13.405016-29.982212 29.879884l0 359.070251c0 16.167882 13.405016 29.879884 29.982212 29.879884 15.963226 0 29.879884-13.405016 29.879884-29.879884L541.879884 396.829419C541.879884 380.763865 528.474868 366.949535 512 366.949535L512 366.949535z"
    p-id="3083"></path>
  <path d="M482.017788 287.645048c0-7.776956 3.274508-15.553912 8.80024-21.181973 5.525732-5.525732 13.302688-8.80024 21.181973-8.80024 7.776956 0 15.553912 3.274508 21.079644 8.80024 5.525732 5.62806 8.80024 13.405016 8.80024 21.181973 0 7.776956-3.274508 15.656241-8.80024 21.181973-5.525732 5.525732-13.405016 8.697911-21.079644 8.697911-7.879285 0-15.656241-3.274508-21.181973-8.697911C485.292295 303.301289 482.017788 295.524333 482.017788 287.645048L482.017788 287.645048z"
    p-id="3084"></path>
  <path d="M512 946.844409c-239.8577 0-434.895573-195.037873-434.895573-434.895573 0-239.8577 195.037873-434.895573 434.895573-434.895573 239.755371 0 434.895573 195.037873 434.895573 434.895573C946.895573 751.806535 751.755371 946.844409 512 946.844409zM512 126.17088c-212.740682 0-385.880284 173.037274-385.880284 385.777955 0 212.740682 173.037274 385.777955 385.880284 385.777955 212.740682 0 385.777955-173.037274 385.777955-385.777955C897.777955 299.208154 724.740682 126.17088 512 126.17088z"
    p-id="3085"></path>
</svg>
</span> <span class="gt-ico-text">Markdown is supported</span></span></a> <!----> <button class="gt-btn gt-btn-preview"><span class="gt-btn-text">Preview</span> <!----></button> <button class="gt-btn gt-btn-login"><span class="gt-btn-text">Login with GitHub</span> <!----></button></div></div></div> <div class="gt-comments"><span></span> <p class="gt-comments-null">
                Be the first guy leaving a comment!
            </p> <!----></div></div></div></div></div></div> <!----></div> <div class="tool-group"><!----></div></div> <!----></div> <div class="background-mask" style="background:#f6f6f6;"></div></div></div>
    <script src="/assets/js/app.35b69267.js" defer></script><script src="/assets/js/64.9384bc9a.js" defer></script>
  </body>
</html>
