(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{272:function(t,e,r){"use strict";r.r(e);var s=r(2),a=Object(s.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[r("p"),t._m(0),r("p"),t._v(" "),t._m(1),t._v(" "),r("hr"),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://docs.docker.com/docker-for-mac/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mac"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://docs.docker.com/docker-for-windows/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("windows"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/centos/",target:"_blank",rel:"noopener noreferrer"}},[t._v("centos"),r("OutboundLink")],1)])]),t._v(" "),r("p",[t._v("centos7.2中安装docker")]),t._v(" "),t._m(10),t._v(" "),r("p",[t._v("查看docker版本")]),t._v(" "),t._m(11),t._v(" "),r("p",[t._v("启动docker服务")]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),r("ul",[r("li",[r("p",[r("a",{attrs:{href:"https://dev.aliyun.com/search.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("镜像仓库"),r("OutboundLink")],1)])]),t._v(" "),r("li",[r("p",[r("a",{attrs:{href:"https://cr.console.aliyun.com/?spm=5176.1971733.0.2.fAi0GG#/imageList",target:"_blank",rel:"noopener noreferrer"}},[t._v("管理中心"),r("OutboundLink")],1)]),t._v(" "),t._m(16)])]),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),t._m(56),t._v(" "),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),t._v(" "),t._m(60),t._v(" "),r("p",[t._v("表示要排除，不要打包到image中的文件路径")]),t._v(" "),t._m(61),t._v(" "),t._m(62),t._v(" "),t._m(63),t._v(" "),r("p",[t._v("Dockerfile")]),t._v(" "),t._m(64),t._v(" "),t._m(65),t._v(" "),t._m(66),t._v(" "),t._m(67),t._v(" "),t._m(68),t._v(" "),t._m(69),t._v(" "),t._m(70),t._v(" "),t._m(71),t._v(" "),t._m(72),t._v(" "),t._m(73),t._v(" "),t._m(74),t._v(" "),t._m(75),t._v(" "),r("ul",[r("li",[r("p",[r("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("注册账户"),r("OutboundLink")],1)]),t._v(" "),t._m(76)])]),t._v(" "),t._m(77),t._v(" "),t._m(78),t._v(" "),t._m(79),t._v(" "),t._m(80),t._m(81),t._v(" "),t._m(82),t._m(83),t._v(" "),t._m(84),t._m(85),t._v(" "),r("p",[t._v("Compose 是一个用户定义和运行多个容器的 Docker 应用程序。在 Compose 中你可以使用 YAML 文件来配置你的应用服务。然后，只需要一个简单的命令，就可以创建并启动你配置的所有服务。 使用 Compose 基本会有如下三步流程：")]),t._v(" "),t._m(86),t._v(" "),t._m(87),t._v(" "),r("p",[t._v("Dockerfile")]),t._v(" "),t._m(88),t._m(89),t._v(" "),t._m(90),r("p",[t._v("nginx.conf")]),t._v(" "),t._m(91),t._m(92),t._v(" "),t._m(93),t._m(94),t._v(" "),t._m(95)])},[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"table-of-contents"},[r("ul",[r("li",[r("a",{attrs:{href:"#布署软件的问题"}},[t._v("布署软件的问题")]),r("ul",[r("li",[r("a",{attrs:{href:"#_2-虚拟机-t12-虚拟机"}},[t._v("2\\. 虚拟机 #")])]),r("li",[r("a",{attrs:{href:"#_3-linux-容器-t23-linux-容器"}},[t._v("3\\. Linux 容器 #")])]),r("li",[r("a",{attrs:{href:"#_4-docker-是什么-t34-docker-是什么"}},[t._v("4\\. Docker 是什么 #")])]),r("li",[r("a",{attrs:{href:"#_5-docker-的安装-t45-docker-的安装"}},[t._v("5\\. Docker 的安装 #")])]),r("li",[r("a",{attrs:{href:"#_6-docker架构-t56-docker架构"}},[t._v("6\\. Docker架构 #")])]),r("li",[r("a",{attrs:{href:"#_7-阿里云加速-t67-阿里云加速"}},[t._v("7.阿里云加速 #")])]),r("li",[r("a",{attrs:{href:"#_8-image-t78-image"}},[t._v("8\\. image #")])]),r("li",[r("a",{attrs:{href:"#_9-容器-t129-容器"}},[t._v("9\\. 容器 #")])]),r("li",[r("a",{attrs:{href:"#_10-制作个性化镜像-t2010-制作个性化镜像"}},[t._v("10\\. 制作个性化镜像 #")])]),r("li",[r("a",{attrs:{href:"#_11-制作dockerfile-t2211-制作dockerfile"}},[t._v("11\\. 制作Dockerfile #")])]),r("li",[r("a",{attrs:{href:"#_12-数据盘-t3012-数据盘"}},[t._v("12 数据盘 #")])]),r("li",[r("a",{attrs:{href:"#_13-compose-t3513-compose"}},[t._v("13.compose #")])])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"布署软件的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#布署软件的问题","aria-hidden":"true"}},[this._v("#")]),this._v(" 布署软件的问题")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("如果想让软件运行起来要保证操作系统的设置，各种库和组件的安装都是正确的")]),this._v(" "),e("li",[this._v("热带鱼&冷水鱼 冷水鱼适应的水温在5-30度，而热带鱼只能适应22-30度水温，低于22度半小时就冻死了")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_2-虚拟机-t12-虚拟机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-虚拟机-t12-虚拟机","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 虚拟机 [#](#t12. 虚拟机)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("虚拟机（virtual machine）就是带环境安装的一种解决方案。它可以在一种操作系统里面运行另一种操作系统\n"),e("ul",[e("li",[this._v("资源占用多")]),this._v(" "),e("li",[this._v("冗余步骤多")]),this._v(" "),e("li",[this._v("启动速度慢")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_3-linux-容器-t23-linux-容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-linux-容器-t23-linux-容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. Linux 容器 [#](#t23. Linux 容器)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[t._v("由于虚拟机存在这些缺点，Linux 发展出了另一种虚拟化技术：Linux 容器（Linux Containers，缩写为 LXC）。")]),t._v(" "),r("li",[t._v("Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔离。或者说，在正常进程的外面套了一个保护层。对于容器里面的进程来说，它接触到的各种资源都是虚拟的，从而实现与底层系统的隔离。\n"),r("ul",[r("li",[t._v("启动快")]),t._v(" "),r("li",[t._v("资源占用少")]),t._v(" "),r("li",[t._v("体积小")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_4-docker-是什么-t34-docker-是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-docker-是什么-t34-docker-是什么","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. Docker 是什么 [#](#t34. Docker 是什么)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口。它是目前最流行的 Linux 容器解决方案。")]),this._v(" "),e("li",[this._v("Docker 将应用程序与该程序的依赖，打包在一个文件里面。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_5-docker-的安装-t45-docker-的安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-docker-的安装-t45-docker-的安装","aria-hidden":"true"}},[this._v("#")]),this._v(" 5. Docker 的安装 [#](#t45. Docker 的安装)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("yum -y install docker-io\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("$ docker version\n$ docker info\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("systemctl start docker\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_6-docker架构-t56-docker架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-docker架构-t56-docker架构","aria-hidden":"true"}},[this._v("#")]),this._v(" 6. Docker架构 [#](#t56. Docker架构)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"assets/docker-arch.jpg",alt:"docker"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_7-阿里云加速"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-阿里云加速","aria-hidden":"true"}},[this._v("#")]),this._v(" 7.阿里云加速 "),e("a",{attrs:{href:"#t67.%E9%98%BF%E9%87%8C%E4%BA%91%E5%8A%A0%E9%80%9F"}},[this._v("#")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /etc/docker\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("tee")]),t._v(" /etc/docker/daemon.json "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v("-"),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EOF'")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"registry-mirrors"')]),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://fwvjnv59.mirror.aliyuncs.com"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nEOF\nsystemctl daemon-reload\nsystemctl restart docker\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_8-image-t78-image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-image-t78-image","aria-hidden":"true"}},[this._v("#")]),this._v(" 8. image [#](#t78. image)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[t._v("Docker 把应用程序及其依赖，打包在 image 文件里面。只有通过这个文件，才能生成 Docker 容器")]),t._v(" "),r("li",[t._v("image 文件可以看作是容器的模板")]),t._v(" "),r("li",[t._v("Docker 根据 image 文件生成容器的实例")]),t._v(" "),r("li",[t._v("同一个 image 文件，可以生成多个同时运行的容器实例")]),t._v(" "),r("li",[t._v("一个 image 文件往往通过继承另一个 image 文件，加上一些个性化设置而生成")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",[r("thead",[r("tr",[r("th",[t._v("命令")]),t._v(" "),r("th",[t._v("含义")]),t._v(" "),r("th",[t._v("案例")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("images")]),t._v(" "),r("td",[t._v("查看全部镜像")]),t._v(" "),r("td",[t._v("docker image ls")])]),t._v(" "),r("tr",[r("td",[t._v("pull")]),t._v(" "),r("td",[t._v("拉取镜像")]),t._v(" "),r("td",[t._v("docker rmi [imageName]")])]),t._v(" "),r("tr",[r("td",[t._v("rmi")]),t._v(" "),r("td",[t._v("删除镜像")]),t._v(" "),r("td",[t._v("docker rmi [imageName]")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_8-1-查找镜像-t88-1-查找镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-查找镜像-t88-1-查找镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 8.1 查找镜像 [#](#t88.1 查找镜像)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker search ubuntu\n")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",[r("thead",[r("tr",[r("th",[t._v("字段")]),t._v(" "),r("th",[t._v("含义")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("NAME")]),t._v(" "),r("td",[t._v("名称")])]),t._v(" "),r("tr",[r("td",[t._v("DESCRIPTION")]),t._v(" "),r("td",[t._v("描述")])]),t._v(" "),r("tr",[r("td",[t._v("STARTS")]),t._v(" "),r("td",[t._v("星星的数量")])]),t._v(" "),r("tr",[r("td",[t._v("OFFICIAL")]),t._v(" "),r("td",[t._v("是否官方源")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_8-2-查看镜像-t98-2-查看镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-查看镜像-t98-2-查看镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 8.2 查看镜像 [#](#t98.2 查看镜像)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker image ls\n")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",[r("thead",[r("tr",[r("th",[t._v("字段")]),t._v(" "),r("th",[t._v("含义")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("REPOSITORY")]),t._v(" "),r("td",[t._v("仓库地址")])]),t._v(" "),r("tr",[r("td",[t._v("TAG")]),t._v(" "),r("td",[t._v("标签")])]),t._v(" "),r("tr",[r("td",[t._v("IMAGE_ID")]),t._v(" "),r("td",[t._v("镜像ID")])]),t._v(" "),r("tr",[r("td",[t._v("CREATED")]),t._v(" "),r("td",[t._v("创建时间")])]),t._v(" "),r("tr",[r("td",[t._v("SIZE")]),t._v(" "),r("td",[t._v("镜像大小")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_8-3-拉取镜像-t108-3-拉取镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-拉取镜像-t108-3-拉取镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 8.3 拉取镜像 [#](#t108.3 拉取镜像)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker  pull hello-world\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("docker image pull是抓取 image 文件的命令")]),this._v(" "),e("li",[this._v("library/hello-world是 image 文件在仓库里面的位置，其中library是 image的作者，hello-world是 image 文件的名字")]),this._v(" "),e("li",[this._v("Docker 官方提供的 image 文件，都放在library组里面，所以它的是默认组，可以省略 "),e("code",[this._v("docker image pull hello-world")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_8-4-删除镜像-t118-4-删除镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-删除镜像-t118-4-删除镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 8.4 删除镜像 [#](#t118.4 删除镜像)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker rmi  hello-world\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_9-容器-t129-容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-容器-t129-容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 9. 容器 [#](#t129. 容器)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[r("code",[t._v("docker run")]),t._v(" 命令会从 "),r("code",[t._v("image")]),t._v(" 文件，生成一个正在运行的容器实例。")]),t._v(" "),r("li",[t._v("docker container run命令具有自动抓取 image 文件的功能。如果发现本地没有指定的 image 文件，就会从仓库自动抓取")]),t._v(" "),r("li",[t._v("输出提示以后，hello world就会停止运行，容器自动终止。")]),t._v(" "),r("li",[t._v("有些容器不会自动终止")]),t._v(" "),r("li",[t._v("image 文件生成的容器实例，本身也是一个文件，称为容器文件")]),t._v(" "),r("li",[t._v("容器生成，就会同时存在两个文件： image 文件和容器文件")]),t._v(" "),r("li",[t._v("关闭容器并不会删除容器文件，只是容器停止运行")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_9-1-命令-t139-1-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-命令-t139-1-命令","aria-hidden":"true"}},[this._v("#")]),this._v(" 9.1 命令 [#](#t139.1 命令)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",[r("thead",[r("tr",[r("th",[t._v("命令")]),t._v(" "),r("th",[t._v("含义")]),t._v(" "),r("th",[t._v("案例")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("run")]),t._v(" "),r("td",[t._v("从镜像运行一个容器")]),t._v(" "),r("td",[t._v("docker image ls")])]),t._v(" "),r("tr",[r("td",[t._v("ps")]),t._v(" "),r("td",[t._v("查看当前运行的容器")]),t._v(" "),r("td",[t._v("docker ps -a -l")])]),t._v(" "),r("tr",[r("td",[t._v("kill [containerId]")]),t._v(" "),r("td",[t._v("终止容器(发送SIGKILL )")]),t._v(" "),r("td",[t._v("docker kill [containerId]")])]),t._v(" "),r("tr",[r("td",[t._v("rm [containerId]")]),t._v(" "),r("td",[t._v("删除容器")]),t._v(" "),r("td",[t._v("docker rm [containerId]")])]),t._v(" "),r("tr",[r("td",[t._v("start [containerId]")]),t._v(" "),r("td",[t._v("启动已经生成、已经停止运行的容器文件")]),t._v(" "),r("td",[t._v("docker start [containerId]")])]),t._v(" "),r("tr",[r("td",[t._v("stop [containerId]")]),t._v(" "),r("td",[t._v("终止容器运行 (发送 SIGTERM )")]),t._v(" "),r("td",[t._v("docker stop [containerId]")])]),t._v(" "),r("tr",[r("td",[t._v("logs [containerId]")]),t._v(" "),r("td",[t._v("查看 docker 容器的输出")]),t._v(" "),r("td",[t._v("docker logs [containerId]")])]),t._v(" "),r("tr",[r("td",[t._v("exec [containerId]")]),t._v(" "),r("td",[t._v("进入一个正在运行的 docker 容器")]),t._v(" "),r("td",[t._v("docker container exec -it [containerID] /bin/bash")])]),t._v(" "),r("tr",[r("td",[t._v("cp [containerId]")]),t._v(" "),r("td",[t._v("从正在运行的 Docker 容器里面，将文件拷贝到本机")]),t._v(" "),r("td",[t._v("docker container cp [containID]:app/package.json .")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_9-2-启动容器-t149-2-启动容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-启动容器-t149-2-启动容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 9.2 启动容器 [#](#t149.2 启动容器)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('docker run ubuntu /bin/echo "Hello world"\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("docker: Docker 的二进制执行文件。")]),this._v(" "),e("li",[this._v("run:与前面的 docker 组合来运行一个容器。")]),this._v(" "),e("li",[this._v("ubuntu指定要运行的镜像，Docker首先从本地主机上查找镜像是否存在，如果不存在，Docker 就会从镜像仓库 Docker Hub 下载公共镜像。")]),this._v(" "),e("li",[this._v('/bin/echo "Hello world": 在启动的容器里执行的命令')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v('Docker以ubuntu镜像创建一个新容器，然后在容器里执行 bin/echo "Hello world"，然后输出结果')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_9-3-查看容器-t159-3-查看容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-查看容器-t159-3-查看容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 9.3 查看容器 [#](#t159.3 查看容器)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker ps\ndocker -a\ndocker -l\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("-a 显示所有的容器，包括已停止的")]),this._v(" "),e("li",[this._v("-a 显示最新的那个容器")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",[r("thead",[r("tr",[r("th",[t._v("字段")]),t._v(" "),r("th",[t._v("含义")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("CONTAINER ID")]),t._v(" "),r("td",[t._v("容器ID")])]),t._v(" "),r("tr",[r("td",[t._v("IMAGE")]),t._v(" "),r("td",[t._v("使用的镜像")])]),t._v(" "),r("tr",[r("td",[t._v("COMMAND")]),t._v(" "),r("td",[t._v("使用的命令")])]),t._v(" "),r("tr",[r("td",[t._v("CREATED")]),t._v(" "),r("td",[t._v("创建时间")])]),t._v(" "),r("tr",[r("td",[t._v("STATUS")]),t._v(" "),r("td",[t._v("状态")])]),t._v(" "),r("tr",[r("td",[t._v("PORTS")]),t._v(" "),r("td",[t._v("端口号")])]),t._v(" "),r("tr",[r("td",[t._v("NAMES")]),t._v(" "),r("td",[t._v("自动分配的名称")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_9-4-运行交互式的容器-t169-4-运行交互式的容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-运行交互式的容器-t169-4-运行交互式的容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 9.4 运行交互式的容器 [#](#t169.4 运行交互式的容器)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker run -i -t ubuntu /bin/bash\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("-t=--interactive 在新容器内指定一个伪终端或终端。")]),this._v(" "),e("li",[this._v("-i=--tty 允许你对容器内的标准输入 (STDIN) 进行交互。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("我们可以通过运行exit命令或者使用CTRL+D来退出容器。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_9-5-后台运行容器-t179-5-后台运行容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-后台运行容器-t179-5-后台运行容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 9.5 后台运行容器 [#](#t179.5 后台运行容器)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker run --detach centos ping www.baidu.com\ndocker logs --follow ad04d9acde94\ndocker stop ad04d9acde94\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_9-6-kill-t189-6-kill"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-6-kill-t189-6-kill","aria-hidden":"true"}},[this._v("#")]),this._v(" 9.6 kill [#](#t189.6 kill)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker kill 5a5c3a760f61\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_9-7-删除容器-t199-7-删除容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-7-删除容器-t199-7-删除容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 9.7 删除容器 [#](#t199.7 删除容器)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker rm 5a5c3a760f61\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_10-制作个性化镜像-t2010-制作个性化镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-制作个性化镜像-t2010-制作个性化镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 10. 制作个性化镜像 [#](#t2010. 制作个性化镜像)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_10-1-编辑镜像-t2110-1-编辑镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-编辑镜像-t2110-1-编辑镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 10.1 编辑镜像 [#](#t2110.1  编辑镜像)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('docker commit -m"hello" -a "zhangrenyang" [containerId] zhangrenyang/hello:latest\ndocker images\ndocker run zhangrenyang/hello /bin/bash\ndocker rm b2839066c362\ndocker rmi c79ef5b3f5fc\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_11-制作dockerfile-t2211-制作dockerfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-制作dockerfile-t2211-制作dockerfile","aria-hidden":"true"}},[this._v("#")]),this._v(" 11. 制作Dockerfile [#](#t2211. 制作Dockerfile)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[r("p",[t._v("Docker 的镜像是用一层一层的文件组成的")])]),t._v(" "),r("li",[r("p",[r("code",[t._v("docker inspect")]),t._v("命令可以查看镜像或者容器")])]),t._v(" "),r("li",[r("p",[t._v("Layers就是镜像的层文件，只读不能修改。基于镜像创建的容器会共享这些文件层")]),t._v(" "),r("pre",[r("code",[t._v("docker inspect centos\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_11-1-编写dockerfile-t2311-1-编写dockerfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-1-编写dockerfile-t2311-1-编写dockerfile","aria-hidden":"true"}},[this._v("#")]),this._v(" 11.1 编写Dockerfile [#](#t2311.1 编写Dockerfile)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",[r("thead",[r("tr",[r("th",[t._v("命令")]),t._v(" "),r("th",[t._v("含义")]),t._v(" "),r("th",[t._v("案例")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("FROM")]),t._v(" "),r("td",[t._v("继承的镜像")]),t._v(" "),r("td",[t._v("FROM node")])]),t._v(" "),r("tr",[r("td",[t._v("COPY")]),t._v(" "),r("td",[t._v("拷贝")]),t._v(" "),r("td",[t._v("COPY ./app /app")])]),t._v(" "),r("tr",[r("td",[t._v("WORKDIR")]),t._v(" "),r("td",[t._v("指定工作路径")]),t._v(" "),r("td",[t._v("WORKDIR /app")])]),t._v(" "),r("tr",[r("td",[t._v("RUN")]),t._v(" "),r("td",[t._v("编译打包阶段运行命令")]),t._v(" "),r("td",[t._v("RUN npm install")])]),t._v(" "),r("tr",[r("td",[t._v("EXPOSE")]),t._v(" "),r("td",[t._v("暴露端口")]),t._v(" "),r("td",[t._v("EXPOSE 3000")])]),t._v(" "),r("tr",[r("td",[t._v("CMD")]),t._v(" "),r("td",[t._v("容器运行阶段运行命令")]),t._v(" "),r("td",[t._v("CMD npm run start")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_11-2-dockerignore-t2411-2-dockerignore"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-dockerignore-t2411-2-dockerignore","aria-hidden":"true"}},[this._v("#")]),this._v(" 11.2 .dockerignore [#](#t2411.2 .dockerignore)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v(".git\nnode_modules\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_11-3-dockerfile-t2511-3-dockerfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-3-dockerfile-t2511-3-dockerfile","aria-hidden":"true"}},[this._v("#")]),this._v(" 11.3 Dockerfile [#](#t2511.3 Dockerfile)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("npm install express-generator -g\nexpress app\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("FROM node\nCOPY ./app /app\nWORKDIR /app\nRUN npm install\nEXPOSE 3000\n")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[t._v("FROM 表示该镜像继承的镜像 :表示标签")]),t._v(" "),r("li",[t._v("COPY 是将当前目录下的app目录下面的文件都拷贝到image里的/app目录中")]),t._v(" "),r("li",[t._v("WORKDIR 指定工作路径，类似于执行 "),r("code",[t._v("cd")]),t._v(" 命令")]),t._v(" "),r("li",[t._v("RUN npm install 在/app目录下安装依赖，安装后的依赖也会打包到image目录中")]),t._v(" "),r("li",[t._v("EXPOSE 暴露3000端口，允许外部连接这个端口")]),t._v(" "),r("li",[t._v("CMD 执行命令")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_11-4-创建image-t2611-4-创建image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-创建image-t2611-4-创建image","aria-hidden":"true"}},[this._v("#")]),this._v(" 11.4 创建image [#](#t2611.4 创建image)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker build -t express-demo .\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("-t用来指定image镜像的名称，后面还可以加冒号指定标签，如果不指定默认就是latest")]),this._v(" "),e("li",[e("code",[this._v(".")]),this._v(" 表示Dockerfile文件的所有路径,"),e("code",[this._v(".")]),this._v("就表示当前路径")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_11-5-从新的镜像运行容器-t2711-5-从新的镜像运行容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-5-从新的镜像运行容器-t2711-5-从新的镜像运行容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 11.5 从新的镜像运行容器 [#](#t2711.5 从新的镜像运行容器)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker container run -p 3333:3000 -it express-demo /bin/bash\n\n\nnpm start\n")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[t._v("-p参数是将容器的3000端口映射为本机的3333端口")]),t._v(" "),r("li",[t._v("-it参数是将容器的shell容器映射为当前的shell,在本机容器中执行的命令都会发送到容器当中执行")]),t._v(" "),r("li",[t._v("express-demo image的名称")]),t._v(" "),r("li",[t._v("/bin/bash 容器启动后执行的第一个命令,这里是启动了bash容器以便执行脚本")]),t._v(" "),r("li",[t._v("--rm 在容器终止运行后自动删除容器文件")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_11-6-cmd-t2811-6-cmd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-6-cmd-t2811-6-cmd","aria-hidden":"true"}},[this._v("#")]),this._v(" 11.6 CMD [#](#t2811.6 CMD)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("CMD npm start\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("RUN命令在 image 文件的构建阶段执行，执行结果都会打包进入 image 文件；CMD命令则是在容器启动后执行")]),this._v(" "),e("li",[this._v("一个 Dockerfile 可以包含多个RUN命令，但是只能有一个CMD命令")]),this._v(" "),e("li",[this._v("指定了CMD命令以后，docker container run命令就不能附加命令了（比如前面的/bin/bash），否则它会覆盖CMD命令")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_11-7-发布image-t2911-7-发布image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-发布image-t2911-7-发布image","aria-hidden":"true"}},[this._v("#")]),this._v(" 11.7 发布image [#](#t2911.7 发布image)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker login\ndocker image tag "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("imageName"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("username"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("/"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("repository"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("tag"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ndocker image build -t "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("username"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("/"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("repository"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("tag"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n\ndocker tag express-demo zhangrenyang/express-demo:1.0.0\ndocker push zhangrenyang/express-demo:1.0.0\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_12-数据盘-t3012-数据盘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-数据盘-t3012-数据盘","aria-hidden":"true"}},[this._v("#")]),this._v(" 12 数据盘 [#](#t3012 数据盘)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[r("p",[t._v("删除容器的时候，容器层里创建的文件也会被删除掉，如果有些数据你想永久保存，比如Web服务器的日志，数据库管理系统中的数据，可以为容器创建一个数据盘。")])]),t._v(" "),r("li",[r("p",[t._v("创建容器的时候我们可以通过"),r("code",[t._v("-v")]),t._v("或"),r("code",[t._v("--volumn")]),t._v("给它指定一下数据盘")]),t._v(" "),r("h3",{attrs:{id:"_12-1-默认数据盘-t3112-1-默认数据盘"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-默认数据盘-t3112-1-默认数据盘","aria-hidden":"true"}},[t._v("#")]),t._v(" 12.1 默认数据盘 [#](#t3112.1 默认数据盘)")]),t._v(" "),r("pre",[r("code",[t._v("docker run -v /mnt -i -t --name logs centos bash\necho 1 > 1.txt\nexit\n")])]),t._v(" "),r("div",{staticClass:"language-json extra-class"},[r("pre",{pre:!0,attrs:{class:"language-json"}},[r("code",[t._v("docker inspect logs\n"),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Mounts"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Source"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/mnt/sda1/var/lib/docker/volumes/dea6a8b3aefafa907d883895bbf931a502a51959f83d63b7ece8d7814cf5d489/_data"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Destination"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/mnt"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),r("li",[r("p",[r("code",[t._v("Source")]),t._v("的值就是我们给容器指定的数据盘在主机上的位置")])]),t._v(" "),r("li",[r("p",[r("code",[t._v("Destination")]),t._v("的值是这个数据盘在容器上的位置")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_12-2-指定数据盘-t3212-2-指定数据盘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-2-指定数据盘-t3212-2-指定数据盘","aria-hidden":"true"}},[this._v("#")]),this._v(" 12.2 指定数据盘 [#](#t3212.2 指定数据盘)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" ~/data\ndocker run -v ~/data:/mnt -ti --name logs2 centos "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("cd")]),t._v(" /mnt\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" 3 "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 3.txt\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exit")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" ~/data/3.txt\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_12-3-指定数据盘容器-t3312-3-指定数据盘容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-3-指定数据盘容器-t3312-3-指定数据盘容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 12.3 指定数据盘容器 [#](#t3312.3 指定数据盘容器)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-dockerfile extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker create -v /mnt --name logger centos\ndocker run --volumes-from logger --name logger3 -i -t centos bash\ndocker run --volumes-from logger --name logger4 -i -t centos bash\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_12-4-管理数据盘-t3412-4-管理数据盘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-4-管理数据盘-t3412-4-管理数据盘","aria-hidden":"true"}},[this._v("#")]),this._v(" 12.4 管理数据盘 [#](#t3412.4  管理数据盘)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-dockerfile extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker volume ls 列出所有的数据盘\ndocker volume ls -f dangling=true 列出已经孤立的数据盘\ndocker volume rm xxxx\ndocker volume ls\ndocker rm logger1 logger2\ndocker volume inspect xxx\ndocker rm logger -v\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_13-compose"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-compose","aria-hidden":"true"}},[this._v("#")]),this._v(" 13.compose "),e("a",{attrs:{href:"#t3513.compose"}},[this._v("#")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("p",[this._v("在 Dockfile 中定义你的应用环境，使其可以在任何地方复制。")])]),this._v(" "),e("li",[e("p",[this._v("在 docker-compose.yml 中定义组成应用程序的服务，以便它们可以在隔离的环境中一起运行。")])]),this._v(" "),e("li",[e("p",[this._v("最后，运行docker-compose up，Compose 将启动并运行整个应用程序。")]),this._v(" "),e("p",[this._v("pip install docker-compose")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_13-1-blog-t3613-1-blog"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-blog-t3613-1-blog","aria-hidden":"true"}},[this._v("#")]),this._v(" 13.1 blog [#](#t3613.1 blog)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"language-nginx extra-class"},[r("pre",{pre:!0,attrs:{class:"language-nginx"}},[r("code",[t._v("FROM node\nRUN npm i express"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("generator "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g\nRUN express app\nWORKDIR app\nRUN npm install\nEXPOSE "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),t._v("\nCMD "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"start"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_13-2-nginx-t3713-2-nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-nginx-t3713-2-nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" 13.2 nginx [#](#t3713.2 nginx)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"language-nginx extra-class"},[r("pre",{pre:!0,attrs:{class:"language-nginx"}},[r("code",[t._v("FROM nginx\nCOPY nginx"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf\nEXPOSE "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"language-nginx extra-class"},[r("pre",{pre:!0,attrs:{class:"language-nginx"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("events")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" epoll"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("http")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_pass")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("http")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("blog"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_13-3-docker-compose-yml-t3813-3-docker-compose-yml"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-3-docker-compose-yml-t3813-3-docker-compose-yml","aria-hidden":"true"}},[this._v("#")]),this._v(" 13.3 docker-compose.yml [#](#t3813.3 docker-compose.yml)")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"language-yaml extra-class"},[r("pre",{pre:!0,attrs:{class:"language-yaml"}},[r("code",[r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n   "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("blog")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n     "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" blog\n     "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" default\n     "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3000:3000"')]),t._v("\n\n   "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nginx")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n     "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx\n     "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" default\n     "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"80:80"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_13-4-启动-t3913-4-启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-4-启动-t3913-4-启动","aria-hidden":"true"}},[this._v("#")]),this._v(" 13.4 启动 [#](#t3913.4 启动)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("docker-compose up -d\n")])])}],!1,null,null,null);e.default=a.exports}}]);